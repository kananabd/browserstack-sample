function a26_0x2579(_0x5f1899,_0x2ab9c1){const _0x53ffb2=a26_0x53ff();return a26_0x2579=function(_0x2579d6,_0x20b716){_0x2579d6=_0x2579d6-0x18d;let _0xcb2652=_0x53ffb2[_0x2579d6];return _0xcb2652;},a26_0x2579(_0x5f1899,_0x2ab9c1);}const a26_0x5f41e3=a26_0x2579;(function(_0x35a6bf,_0x29254b){const _0x354fee=a26_0x2579,_0x3e4062=_0x35a6bf();while(!![]){try{const _0x8bb97c=-parseInt(_0x354fee(0x1b8))/0x1*(parseInt(_0x354fee(0x1a7))/0x2)+-parseInt(_0x354fee(0x1c5))/0x3*(parseInt(_0x354fee(0x19c))/0x4)+parseInt(_0x354fee(0x1c1))/0x5+parseInt(_0x354fee(0x18e))/0x6+parseInt(_0x354fee(0x19a))/0x7+-parseInt(_0x354fee(0x1bf))/0x8+parseInt(_0x354fee(0x193))/0x9*(parseInt(_0x354fee(0x1c0))/0xa);if(_0x8bb97c===_0x29254b)break;else _0x3e4062['push'](_0x3e4062['shift']());}catch(_0x52f519){_0x3e4062['push'](_0x3e4062['shift']());}}}(a26_0x53ff,0x63ae6));const fs=require('fs'),path=require('path'),Promise=require(a26_0x5f41e3(0x19e)),yaml=require(a26_0x5f41e3(0x1b6)),{CLOUDFORMATION_SCHEMA}=require(a26_0x5f41e3(0x1b1)),AWS=require(a26_0x5f41e3(0x1ba))[a26_0x5f41e3(0x1b4)],AWSUtils=require(a26_0x5f41e3(0x1ba)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x5f41e3(0x1af)),{logger}=require('../config/logger');Promise[a26_0x5f41e3(0x1a1)](fs);const addTags=async(_0x11efef,_0x46d942)=>{const _0x1370c0=a26_0x5f41e3;for(const _0x395eb3 in _0x11efef[_0x1370c0(0x1b5)]){_0x11efef['Resources'][_0x395eb3]['Properties']&&_0x11efef[_0x1370c0(0x1b5)][_0x395eb3][_0x1370c0(0x1c4)][_0x1370c0(0x1b2)]&&_0x11efef['Resources'][_0x395eb3][_0x1370c0(0x1c4)][_0x1370c0(0x1b2)][_0x1370c0(0x1a2)](..._0x46d942);}};function a26_0x53ff(){const _0x2cc8f2=['://','valueOf','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','Capabilities','4659907BWwuib','info','384036McHyvU','Drhto','bluebird','Parameters','schema','promisifyAll','push','waitFor','hOvSz','OnFailure','CAPABILITY_NAMED_IAM','4jhTiQT','nbaXO','StackName','-cf','ClusterOIDCURL','createStack','hub-ha.yaml','gVcBR','../config/constants','NkaMR','js-yaml-cloudformation-schema','Tags','2010-05-15','awsObj','Resources','js-yaml','CloudFormation','311918cAHUoY','apiVersion','./AWSUtils','OpVba','split','join','browserstack:cluster','1930624YLACtx','10mjpjEB','1121060PReayQ','Key','promise','Properties','18AuEXQl','cPXHK','readFileAsync','TemplateBody','BaseResourceName','2272422gwwHYY','DELETE','Xazdc','Value','QesSq','5227758UANhOZ','FGRgu','CFTemplates'];a26_0x53ff=function(){return _0x2cc8f2;};return a26_0x53ff();}exports['createHubHaStack']=async(_0x3e998f,_0x1d7ebb=null)=>{const _0x58d527=a26_0x5f41e3,_0xa08185={'OpVba':_0x58d527(0x1be),'Xazdc':'browserstack:creationDate','XSRYj':_0x58d527(0x1b3),'OAHGl':_0x58d527(0x195),'CvlXr':_0x58d527(0x1ad),'NkaMR':'utf-8','hOvSz':function(_0x440cf0,_0x28f8be,_0x4a528d){return _0x440cf0(_0x28f8be,_0x4a528d);},'QesSq':_0x58d527(0x196),'cPXHK':_0x58d527(0x18f),'nbaXO':'VpcId','gVcBR':_0x58d527(0x18d),'DUSQS':_0x58d527(0x1ab),'Drhto':_0x58d527(0x1a6),'FGRgu':_0x58d527(0x198),'xrXfE':'stackCreateComplete'},_0x4cff4c=COMMON_HST_TAGS,_0x3f618a={};_0x3f618a[_0x58d527(0x1c2)]=_0xa08185[_0x58d527(0x1bb)],_0x3f618a[_0x58d527(0x191)]=_0x3e998f,_0x4cff4c[_0x58d527(0x1a2)](_0x3f618a),_0x4cff4c[_0x58d527(0x1a2)]({'Key':_0xa08185[_0x58d527(0x190)],'Value':new Date()[_0x58d527(0x197)]()['toString']()});const _0x589ba4={};_0x589ba4[_0x58d527(0x1b9)]=_0xa08185['XSRYj'];const _0x3bdd9a=new AWS[(_0x58d527(0x1b7))](_0x589ba4),_0x87f8f1=await fs[_0x58d527(0x1c7)](path[_0x58d527(0x1bd)](__dirname,'..',_0xa08185['OAHGl'],_0xa08185['CvlXr']),_0xa08185[_0x58d527(0x1b0)]),_0x4db541={};_0x4db541[_0x58d527(0x1a0)]=CLOUDFORMATION_SCHEMA;const _0x5f363c=yaml['load'](_0x87f8f1,_0x4db541);await _0xa08185[_0x58d527(0x1a4)](addTags,_0x5f363c,_0x4cff4c);const _0x333a79=JSON['stringify'](_0x5f363c);let _0x43926b=await AWSUtils['getOidcUrl'](_0x3e998f);_0x43926b=_0x43926b[_0x58d527(0x1bc)](_0xa08185[_0x58d527(0x192)])[0x1];const _0x49831e={};_0x49831e['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3e998f+_0x58d527(0x1aa),_0x49831e[_0x58d527(0x1a5)]=_0xa08185[_0x58d527(0x1c6)],_0x49831e[_0x58d527(0x1c8)]=_0x333a79,_0x49831e[_0x58d527(0x19f)]=[{'ParameterKey':_0xa08185[_0x58d527(0x1a8)],'ParameterValue':_0x1d7ebb},{'ParameterKey':_0xa08185[_0x58d527(0x1ae)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3e998f},{'ParameterKey':_0xa08185['DUSQS'],'ParameterValue':_0x43926b}],_0x49831e[_0x58d527(0x199)]=[_0xa08185[_0x58d527(0x19d)]],_0x49831e[_0x58d527(0x1b2)]=_0x4cff4c;const _0xc4d044=_0x49831e,_0x87c4ba=await _0x3bdd9a[_0x58d527(0x1ac)](_0xc4d044)[_0x58d527(0x1c3)]();logger[_0x58d527(0x19b)](_0xa08185[_0x58d527(0x194)]);const _0x132d42={};return _0x132d42[_0x58d527(0x1a9)]=_0x87c4ba['StackId'],_0x3bdd9a[_0x58d527(0x1a3)](_0xa08185['xrXfE'],_0x132d42)[_0x58d527(0x1c3)]();};