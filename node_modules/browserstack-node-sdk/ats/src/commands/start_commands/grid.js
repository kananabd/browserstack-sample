const a17_0x387f69=a17_0x3055;(function(_0x1d48c0,_0x804df4){const _0x41f0e1=a17_0x3055,_0x50d3c1=_0x1d48c0();while(!![]){try{const _0x135c55=-parseInt(_0x41f0e1(0x162))/0x1+parseInt(_0x41f0e1(0x173))/0x2+parseInt(_0x41f0e1(0x169))/0x3+parseInt(_0x41f0e1(0x19a))/0x4*(-parseInt(_0x41f0e1(0x174))/0x5)+-parseInt(_0x41f0e1(0x17d))/0x6*(parseInt(_0x41f0e1(0x18d))/0x7)+parseInt(_0x41f0e1(0x188))/0x8*(-parseInt(_0x41f0e1(0x19d))/0x9)+parseInt(_0x41f0e1(0x1a7))/0xa*(parseInt(_0x41f0e1(0x1a6))/0xb);if(_0x135c55===_0x804df4)break;else _0x50d3c1['push'](_0x50d3c1['shift']());}catch(_0x2c2c84){_0x50d3c1['push'](_0x50d3c1['shift']());}}}(a17_0x1e88,0x9f67f));function a17_0x1e88(){const _0x356d7b=['sAZgk','init-not-called','OlLOe','qRHLj','body','21064WQtTvA','<UsernamePlaceholder>','password','775674MLahOa','description','error','MmOna','ljyza','ERROR','username','../../utils/webSocketUtils','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','4179109pTmWVk','50NMUntp','region','JXIrW','QvHuB','qGkty','existsSync','Starting\x20grid\x20','clusterName','wtIHi','stringify','GFFAU','addListeners','MJJvN','desc','../../utils/gridComponents','statusCode','options','JAljW','builder','boolean','BCygf','../../cloudproviders/utils','1187780VXHnKV','KQhSf','GDBbh','grid','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','exit','<PasswordPlaceholder>','851583vXSMaJ','start-grid-called','name','stack','invalid-grid-id','OoUaZ','bstackAccesskey','server-error','clusterRegion','handler','2237128zqIEty','740KiZsyL','connectionTimeout','type','usage','reconnecting-websocket','Browserstack','../../config/constants','info','WebSocket','3574554SiAmtH','../../config/logger','Adding\x20Websocket\x20listeners','UaHUk','cloudProvider','../../utils/instrumentationUtils','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','gridId','message','mwiYy','skip-tls-cert-verify','8gMuIvG','help','zcktk','INFO','string','7sxEaAf','HFwPd','user','default','JRERW','skipTlsCertVerify','replace','ztJvL'];a17_0x1e88=function(){return _0x356d7b;};return a17_0x1e88();}function a17_0x3055(_0x588355,_0x42f482){const _0x1e88c8=a17_0x1e88();return a17_0x3055=function(_0x3055e4,_0x53309c){_0x3055e4=_0x3055e4-0x15b;let _0x4732e8=_0x1e88c8[_0x3055e4];return _0x4732e8;},a17_0x3055(_0x588355,_0x42f482);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a17_0x387f69(0x178)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a17_0x387f69(0x17a)),{logger}=require(a17_0x387f69(0x17e)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a17_0x387f69(0x1b5)),{sendInstrumentationEvent}=require(a17_0x387f69(0x182)),webSocketUtils=require(a17_0x387f69(0x1a4)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a17_0x387f69(0x161));exports['command']=a17_0x387f69(0x165),exports[a17_0x387f69(0x1b4)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a17_0x387f69(0x15e)]=function(_0x306223){const _0x3a9677=a17_0x387f69,_0x4a92af={};_0x4a92af[_0x3a9677(0x1b3)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x4a92af[_0x3a9677(0x1af)]=_0x3a9677(0x18c),_0x4a92af[_0x3a9677(0x1ab)]='Skip\x20insecure\x20cert\x20verification.',_0x4a92af[_0x3a9677(0x163)]=_0x3a9677(0x15f),_0x4a92af['JAljW']=_0x3a9677(0x189);const _0x48a1b3=_0x4a92af,_0x22957e={};_0x22957e['description']=_0x48a1b3['MJJvN'],_0x22957e[_0x3a9677(0x176)]=_0x48a1b3[_0x3a9677(0x1af)];const _0x5534f9={};_0x5534f9[_0x3a9677(0x19e)]=_0x48a1b3[_0x3a9677(0x1ab)],_0x5534f9[_0x3a9677(0x176)]=_0x48a1b3['KQhSf'],_0x5534f9[_0x3a9677(0x190)]=![];const _0x69c7c5={};return _0x69c7c5['grid-id']=_0x22957e,_0x69c7c5[_0x3a9677(0x187)]=_0x5534f9,_0x306223[_0x3a9677(0x177)](HELP_HEADER_MESSAGE['start'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x3a9677(0x15c)](_0x69c7c5)[_0x3a9677(0x189)](_0x48a1b3[_0x3a9677(0x15d)])['argv'];},exports[a17_0x387f69(0x172)]=async function(_0x2a83ed){const _0x2beda6=a17_0x387f69,_0x2a3946={'sAZgk':_0x2beda6(0x166),'GFFAU':function(_0xae8476){return _0xae8476();},'wuwkB':_0x2beda6(0x183),'QvHuB':function(_0x1a9b12,_0x3efa87,_0x2dc98f,_0x382453,_0x56844f,_0x486ed5,_0x2da728){return _0x1a9b12(_0x3efa87,_0x2dc98f,_0x382453,_0x56844f,_0x486ed5,_0x2da728);},'qRHLj':_0x2beda6(0x16a),'jsYQX':_0x2beda6(0x196),'ztJvL':_0x2beda6(0x19b),'JXIrW':_0x2beda6(0x168),'UIviB':_0x2beda6(0x17f),'GDBbh':function(_0x109f26,_0x4b49ad,_0x2a279a,_0x4b3368){return _0x109f26(_0x4b49ad,_0x2a279a,_0x4b3368);},'OlLOe':function(_0x27ff4a,_0x53033c,_0x19eab8,_0x3fdd68,_0x114f5c,_0x34e950,_0x5d3a2f){return _0x27ff4a(_0x53033c,_0x19eab8,_0x3fdd68,_0x114f5c,_0x34e950,_0x5d3a2f);},'MmOna':function(_0x5b6def,_0x1ea1dc,_0x2c371f){return _0x5b6def(_0x1ea1dc,_0x2c371f);},'OoUaZ':function(_0x4c1fa3,_0x4816c9,_0x454e76){return _0x4c1fa3(_0x4816c9,_0x454e76);},'mwiYy':'Grid\x20started','HFwPd':function(_0x1fbb9c,_0x37a57b){return _0x1fbb9c===_0x37a57b;},'JRERW':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','zcktk':function(_0x506237,_0x822249,_0x21dcc1,_0x2d0b66,_0x2d0097,_0x4c5e41,_0x134b32){return _0x506237(_0x822249,_0x21dcc1,_0x2d0b66,_0x2d0097,_0x4c5e41,_0x134b32);},'ljyza':'unauthorised','pDRZD':_0x2beda6(0x16d),'UaHUk':function(_0x1ca21f,_0x1bf804,_0x1a9757,_0x296c77,_0x52178b,_0x152c50,_0xb06e19){return _0x1ca21f(_0x1bf804,_0x1a9757,_0x296c77,_0x52178b,_0x152c50,_0xb06e19);},'BCygf':_0x2beda6(0x170)};let _0x13c060;try{!_0x2a83ed[_0x2beda6(0x184)]&&(logger[_0x2beda6(0x19f)](_0x2a3946[_0x2beda6(0x195)]),process[_0x2beda6(0x167)](0x1));!fs[_0x2beda6(0x1ac)](_0x2a3946[_0x2beda6(0x1b1)](getCredentialsPath))&&(logger[_0x2beda6(0x19f)](_0x2a3946['wuwkB']),await _0x2a3946[_0x2beda6(0x1aa)](sendInstrumentationEvent,_0x2a83ed,_0x2a3946[_0x2beda6(0x198)],messageTypes[_0x2beda6(0x1a2)],_0x2a3946['jsYQX'],null,_0x2a83ed),process[_0x2beda6(0x167)](0x1));logger['info'](_0x2beda6(0x1ad)+_0x2a83ed[_0x2beda6(0x184)]),await _0x2a3946[_0x2beda6(0x1aa)](sendInstrumentationEvent,_0x2a83ed,_0x2a3946[_0x2beda6(0x198)],messageTypes[_0x2beda6(0x18b)],null,null,_0x2a83ed);const _0x520004=JSON['parse'](fs['readFileSync'](_0x2a3946[_0x2beda6(0x1b1)](getCredentialsPath)));global_registry['bstackUsername']=_0x520004[_0x2beda6(0x179)][_0x2beda6(0x1a3)],global_registry[_0x2beda6(0x16f)]=_0x520004[_0x2beda6(0x179)][_0x2beda6(0x19c)];const _0x36ed55=WS_ENDPOINT[_0x2beda6(0x193)](_0x2a3946[_0x2beda6(0x194)],_0x520004[_0x2beda6(0x179)][_0x2beda6(0x1a3)])[_0x2beda6(0x193)](_0x2a3946[_0x2beda6(0x1a9)],_0x520004[_0x2beda6(0x179)][_0x2beda6(0x19c)]),_0x205667={};_0x205667[_0x2beda6(0x17c)]=ws,_0x205667[_0x2beda6(0x175)]=0x36ee80,_0x13c060=new ReconnectingWebSocket(_0x36ed55,[],_0x205667),logger['debug'](_0x2a3946['UIviB']),webSocketUtils[_0x2beda6(0x1b2)](_0x13c060,_0x2a83ed[_0x2beda6(0x18f)],_0x2a83ed['password']);const [_0x7dfebd,_0xa188fd]=await _0x2a3946[_0x2beda6(0x164)](getGridDetails,_0x520004[_0x2beda6(0x179)]['username'],_0x520004['Browserstack'][_0x2beda6(0x19c)],_0x2a83ed['gridId']);if(_0xa188fd){const _0x1df823=_0xa188fd[_0x2beda6(0x17b)];global_registry[_0x2beda6(0x181)]=_0x1df823[_0x2beda6(0x181)],global_registry[_0x2beda6(0x171)]=_0x1df823[_0x2beda6(0x1a8)],global_registry[_0x2beda6(0x1ae)]=_0x1df823[_0x2beda6(0x1ae)];const _0x12f5b5=await _0x2a3946[_0x2beda6(0x197)](getCloudProviderObject,_0x1df823[_0x2beda6(0x181)],_0x1df823['clusterName'],_0x1df823['name'],_0x13c060,webSocketUtils,_0x2a83ed),[_0x442d10,_0x428ec,_0x4fca29,_0x1097d3,_0x2ace24,_0x16ab5a]=await _0x2a3946[_0x2beda6(0x1a0)](createK8sClient,_0x12f5b5,_0x2a83ed[_0x2beda6(0x192)]);await _0x2a3946[_0x2beda6(0x16e)](scaleUpHubDeployment,_0x428ec,_0x1df823[_0x2beda6(0x16b)]),logger[_0x2beda6(0x17b)](_0x2a3946[_0x2beda6(0x186)]),process[_0x2beda6(0x167)](0x0);}_0x2a3946[_0x2beda6(0x18e)](_0x7dfebd[_0x2beda6(0x15b)],0x191)&&(logger['error'](_0x2a3946[_0x2beda6(0x191)]),await _0x2a3946[_0x2beda6(0x18a)](sendInstrumentationEvent,_0x2a83ed,_0x2a3946[_0x2beda6(0x198)],messageTypes[_0x2beda6(0x1a2)],_0x2a3946[_0x2beda6(0x1a1)],null,_0x2a83ed),process[_0x2beda6(0x167)](0x1)),_0x2a3946[_0x2beda6(0x18e)](_0x7dfebd['statusCode'],0x190)&&(logger['error'](JSON['parse'](_0x7dfebd[_0x2beda6(0x199)])[_0x2beda6(0x185)]),await _0x2a3946[_0x2beda6(0x1aa)](sendInstrumentationEvent,_0x2a83ed,_0x2a3946[_0x2beda6(0x198)],messageTypes[_0x2beda6(0x1a2)],_0x2a3946['pDRZD'],null,_0x2a83ed),process[_0x2beda6(0x167)](0x1)),logger[_0x2beda6(0x19f)](_0x2beda6(0x1a5)+JSON[_0x2beda6(0x1b0)](_0x7dfebd)),await _0x2a3946[_0x2beda6(0x180)](sendInstrumentationEvent,_0x2a83ed,_0x2a3946['qRHLj'],messageTypes['ERROR'],_0x2a3946[_0x2beda6(0x160)],_0x7dfebd,_0x2a83ed),process[_0x2beda6(0x167)](0x1);}catch(_0x3c392f){const _0x4afb98='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x3c392f+'\x20\x0a'+JSON[_0x2beda6(0x1b0)](_0x3c392f[_0x2beda6(0x16c)])+'\x20';logger[_0x2beda6(0x19f)](_0x4afb98),process[_0x2beda6(0x167)](0x1);}};