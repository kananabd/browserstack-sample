#!/usr/bin/env node
'use strict';const a5_0x406ee2=a5_0x5992;(function(_0x5ac39e,_0x5d712d){const _0x4909f3=a5_0x5992,_0x4fd885=_0x5ac39e();while(!![]){try{const _0xa9fe65=parseInt(_0x4909f3(0x102))/0x1*(-parseInt(_0x4909f3(0xfc))/0x2)+parseInt(_0x4909f3(0x138))/0x3*(parseInt(_0x4909f3(0xe6))/0x4)+-parseInt(_0x4909f3(0xe2))/0x5*(parseInt(_0x4909f3(0x100))/0x6)+parseInt(_0x4909f3(0x142))/0x7*(parseInt(_0x4909f3(0x10b))/0x8)+parseInt(_0x4909f3(0x11d))/0x9*(parseInt(_0x4909f3(0xf6))/0xa)+-parseInt(_0x4909f3(0xe4))/0xb*(parseInt(_0x4909f3(0x114))/0xc)+-parseInt(_0x4909f3(0xef))/0xd*(-parseInt(_0x4909f3(0x105))/0xe);if(_0xa9fe65===_0x5d712d)break;else _0x4fd885['push'](_0x4fd885['shift']());}catch(_0x29a416){_0x4fd885['push'](_0x4fd885['shift']());}}}(a5_0x13e8,0x2f9c9));const fs=require('fs'),path=require(a5_0x406ee2(0x13b)),util=require('util'),logger=require(a5_0x406ee2(0x10c))[a5_0x406ee2(0x130)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),utilities=require(a5_0x406ee2(0x11a)),constants=require(a5_0x406ee2(0x14d)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x406ee2(0x10e)),testOpsHelper=require(a5_0x406ee2(0xfe)),chalk=require('chalk'),PerformanceTester=require(a5_0x406ee2(0x13a)),PerformanceEvents=require(a5_0x406ee2(0xe5))[a5_0x406ee2(0xe9)];function a5_0x5992(_0x180771,_0x1236fb){const _0x13e8df=a5_0x13e8();return a5_0x5992=function(_0x5992dd,_0x1693f1){_0x5992dd=_0x5992dd-0xdc;let _0x2ea601=_0x13e8df[_0x5992dd];return _0x2ea601;},a5_0x5992(_0x180771,_0x1236fb);}function printCucumberStats(_0x5ef5d2){const _0x2c9bb7=a5_0x406ee2,_0x52c32c={};_0x52c32c[_0x2c9bb7(0xff)]=function(_0x198844,_0x5f43da){return _0x198844>_0x5f43da;},_0x52c32c['SOTpY']=function(_0x35e2ca,_0xa229d9){return _0x35e2ca-_0xa229d9;},_0x52c32c[_0x2c9bb7(0x126)]=function(_0x1fd4dc,_0x44e34d){return _0x1fd4dc>_0x44e34d;},_0x52c32c[_0x2c9bb7(0x10d)]=function(_0x341dde,_0x384c04){return _0x341dde>_0x384c04;},_0x52c32c[_0x2c9bb7(0x10a)]=function(_0x5e8029,_0x489d83){return _0x5e8029>_0x489d83;},_0x52c32c['lJABT']=function(_0x42ca3d,_0x4a8449){return _0x42ca3d>_0x4a8449;},_0x52c32c[_0x2c9bb7(0xf4)]=function(_0x53d425,_0x36da66){return _0x53d425>_0x36da66;},_0x52c32c[_0x2c9bb7(0x13c)]=function(_0x665f09,_0x3f1e37){return _0x665f09>_0x3f1e37;},_0x52c32c['VdNMj']=function(_0x35f4ee,_0x4dada1){return _0x35f4ee>_0x4dada1;},_0x52c32c[_0x2c9bb7(0x115)]=function(_0x1863b5,_0x33f0c4){return _0x1863b5+_0x33f0c4;},_0x52c32c[_0x2c9bb7(0x11e)]=function(_0x3c46db,_0x345106){return _0x3c46db+_0x345106;},_0x52c32c[_0x2c9bb7(0xe1)]=function(_0x26afe3,_0x2882ff){return _0x26afe3+_0x2882ff;},_0x52c32c['TircU']=function(_0x59859e,_0x2e867b){return _0x59859e===_0x2e867b;},_0x52c32c[_0x2c9bb7(0xf5)]=_0x2c9bb7(0x149);const _0xe6e758=_0x52c32c;let _0x1a42a7=0x0;if(_0xe6e758['TircU'](_0x5ef5d2[_0x2c9bb7(0x113)],0x0))return _0x1a42a7;return console['log'](chalk[_0x2c9bb7(0x124)][_0x2c9bb7(0x136)](_0xe6e758[_0x2c9bb7(0xf5)])),_0x5ef5d2[_0x2c9bb7(0x107)](_0x52e66d=>{const _0x29e18c=_0x2c9bb7,_0x357554=_0x52e66d[0x0],_0x21b347=_0x52e66d[0x1];console['log']('\x0a'+chalk[_0x29e18c(0x124)][_0x29e18c(0x103)](''+helper[_0x29e18c(0x10f)](_0x357554)));const _0x42c2b3=_0x21b347[_0x29e18c(0x152)],_0x107fb4=_0x21b347[_0x29e18c(0xf9)],_0xa05d20=_0x21b347[_0x29e18c(0x145)],_0x15fb80=_0x21b347[_0x29e18c(0xf7)],_0xf6d217=_0x21b347['stepsPassed'],_0xa05627=_0x21b347['stepsSkipped'],_0x2740c5=_0x21b347[_0x29e18c(0xe8)],_0x477bc7=_0x21b347['stepsUndefined'],_0x11cedc=_0x21b347[_0x29e18c(0x14a)],_0x475a69=_0x21b347[_0x29e18c(0x141)],_0x6f2a38=_0x21b347[_0x29e18c(0x123)];let _0x87b611=_0x42c2b3+_0x29e18c(0x112);const _0x4d542e=_0xe6e758[_0x29e18c(0xff)](_0xe6e758[_0x29e18c(0x122)](_0x42c2b3,_0xa05d20),0x0)?_0xe6e758[_0x29e18c(0x122)](_0x42c2b3,_0xa05d20):0x0;if(_0xe6e758[_0x29e18c(0xff)](_0xa05d20,0x0)&&_0xe6e758[_0x29e18c(0xff)](_0x4d542e,0x0))_0x87b611+='\x20('+chalk[_0x29e18c(0x124)]['red'](_0xa05d20+_0x29e18c(0xec))+',\x20'+chalk[_0x29e18c(0x124)]['green'](_0x4d542e+_0x29e18c(0xdf))+')';else(_0xe6e758[_0x29e18c(0x126)](_0xa05d20,0x0)||_0xe6e758[_0x29e18c(0x126)](_0x4d542e,0x0))&&(_0x87b611+=_0xe6e758[_0x29e18c(0x10d)](_0xa05d20,0x0)?'\x20('+chalk[_0x29e18c(0x124)][_0x29e18c(0x118)](_0xa05d20+_0x29e18c(0xec))+')':'\x20('+chalk[_0x29e18c(0x124)][_0x29e18c(0x110)](_0x4d542e+_0x29e18c(0xdf))+')');const _0xd3e525=_0x107fb4+_0x29e18c(0x13d),_0x23e25a=[];_0xe6e758['lSfvi'](_0x475a69,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk[_0x29e18c(0x124)]['red'](_0x475a69+_0x29e18c(0x14b)));_0xe6e758[_0x29e18c(0xdd)](_0x15fb80,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk[_0x29e18c(0x124)][_0x29e18c(0x118)](_0x15fb80+_0x29e18c(0xec)));_0xe6e758[_0x29e18c(0xf4)](_0xf6d217,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk['bold']['green'](_0xf6d217+_0x29e18c(0xdf)));_0xe6e758[_0x29e18c(0x13c)](_0x2740c5,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk[_0x29e18c(0x124)][_0x29e18c(0x103)](_0x2740c5+_0x29e18c(0x127)));_0xe6e758[_0x29e18c(0x109)](_0xa05627,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk[_0x29e18c(0x124)][_0x29e18c(0xea)](_0xa05627+'\x20skipped'));_0xe6e758['VdNMj'](_0x477bc7,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk[_0x29e18c(0x124)][_0x29e18c(0x103)](_0x477bc7+_0x29e18c(0x14e)));_0xe6e758[_0x29e18c(0x10a)](_0x11cedc,0x0)&&_0x23e25a[_0x29e18c(0x132)](''+chalk['bold']['yellow'](_0x11cedc+'\x20skipped'));const _0x2b1e6f=_0xe6e758[_0x29e18c(0x115)](_0xe6e758[_0x29e18c(0x115)](_0xe6e758[_0x29e18c(0x115)](_0xd3e525,'('),_0x23e25a[_0x29e18c(0x11c)](',\x20')),')');console[_0x29e18c(0x12e)](_0xe6e758[_0x29e18c(0x115)](_0xe6e758[_0x29e18c(0x11e)](_0xe6e758[_0x29e18c(0xe1)](_0xe6e758[_0x29e18c(0x115)]('\x0a',_0x87b611),'\x0a'),_0x2b1e6f),'\x0a')),_0xe6e758[_0x29e18c(0x14f)](_0x6f2a38,![])&&(_0x1a42a7=0x1);}),_0x1a42a7;}function a5_0x13e8(){const _0x135c76=['exitCode','config','format','stepsAmbiguous','35PZxwoL','DtRgJ','Generating\x20consolidated\x20report...','scenariosFailed','VUssx','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','getHubUrl','****\x20RESULTS\x20****','stepsUnknown','\x20ambiguous','end','../utils/constants','\x20undefined','TircU','isUndefined','SDK_CLEANUP','scenarios','testObservability','lJABT','BROWSERSTACK_TEST_OBSERVABILITY_YML','\x20passed','getTCGConfigFilePaths','MKOuW','325YcXVoC','createDir','3201NTYqku','../../helpers/performance/constants','6884cXOtxD','framework','stepsPending','EVENTS','cyan','stop','\x20failed','SgZJd','parseFormatters','1298414YjArew','finalExecution','setupTCGAuth','error\x20removing\x20tcg\x20config\x20file','VOldk','rbGTb','TSWXi','20ICcHFG','stepsFailed','getUserWorkerCount','steps','start','env','68YLQpBx','rmdirSync','../../helpers/test-observability/utils','MSLBM','35442mwLRsX','mergeOutputFiles','2412seXRGR','yellow','tmp','14JxlKgz','Removing\x20tmp\x20directory\x20created\x20for\x20reports','forEach','unlinkSync','VdNMj','lSfvi','430264MfZzql','../../helpers/logger','AsiJM','../../helpers/testhub/testhubHandler','getPlatformName','green','prepareCapabilities','\x20scenarios','length','5592mWnPEt','nFePQ','true','FDgbW','red','accessibilityOptions','../../helpers/utilities','turboScaleUrl','join','941517IXtqOC','HaMsi','testContextOptions','setUserConfigPath','skipSessionName','SOTpY','processSuccess','bold','skipSessionStatus','UaVBu','\x20pending','QYLNe','removeDir','CUCUMBER','SDK_SETUP','dnKTp','cucumber-js','log','stringify','winstonLogger','nDgsZ','push','printBuildLink','debug','FRAMEWORKS','bgWhite','launchBuild','381mxadwO','getErrorMessageFromResults','../../helpers/performance/performance-tester','path','bzhmm','\x20steps'];a5_0x13e8=function(){return _0x135c76;};return a5_0x13e8();}async function run(_0x2b0477,_0x3567ea){const _0x1fccda=a5_0x406ee2,_0x43dba9={'nDgsZ':function(_0x46ef8a,_0xb763d7){return _0x46ef8a(_0xb763d7);},'aogow':function(_0x5c6495,_0x2a19e2){return _0x5c6495>_0x2a19e2;},'VKHZp':_0x1fccda(0x144),'VUssx':_0x1fccda(0x106),'FDgbW':'cucumber','BMRsF':_0x1fccda(0xf2),'QYLNe':_0x1fccda(0x12d),'NfCqi':_0x1fccda(0x104),'VOldk':function(_0x20a65e,_0x33a5a0){return _0x20a65e>_0x33a5a0;},'DtRgJ':function(_0xed9a1e,_0x746f2d){return _0xed9a1e-_0x746f2d;},'oFNap':function(_0x4c55de,_0x40c84d){return _0x4c55de>=_0x40c84d;},'SgZJd':function(_0x131b2a,_0x37fef5){return _0x131b2a!=_0x37fef5;},'dnKTp':_0x1fccda(0x116),'OLpiu':function(_0x429480,_0x2e01bf,_0x1b815b,_0x48e03e,_0x17e331,_0x2b6152){return _0x429480(_0x2e01bf,_0x1b815b,_0x48e03e,_0x17e331,_0x2b6152);}},_0x517088=new BrowserStackSetup(_0x2b0477,_0x43dba9[_0x1fccda(0x128)]);await _0x517088['initialize'](),helper[_0x1fccda(0x120)](_0x517088[_0x1fccda(0xe7)],_0x2b0477);!helper['isBrowserstackInfra']()&&await _0x517088[_0x1fccda(0xf1)]();await helper['handleApp'](_0x517088[_0x1fccda(0x13f)]);const _0x25e782=helper['useW3C'](_0x517088['config']),_0x34a855=helper[_0x1fccda(0x111)](_0x517088[_0x1fccda(0x13f)],_0x25e782,constants[_0x1fccda(0x135)][_0x1fccda(0x12a)]);if(!_0x517088[_0x1fccda(0x13f)])return;const _0x56dd05=_0x517088[_0x1fccda(0x13f)]['parallelsPerPlatform']||helper[_0x1fccda(0xf8)](_0x2b0477,_0x3567ea,_0x517088[_0x1fccda(0x13f)],constants[_0x1fccda(0x135)][_0x1fccda(0x12a)])||0x1,_0x366964={'server':helper[_0x1fccda(0x148)](_0x517088[_0x1fccda(0x13f)]),'proxySettings':_0x517088['config']['proxySettings'],'maxWorkers':_0x56dd05,'browserStackLogLevel':_0x517088[_0x1fccda(0x13f)]['logLevel'],'skipSessionName':_0x517088[_0x1fccda(0x13f)][_0x1fccda(0x11f)][_0x1fccda(0x121)],'skipSessionStatus':_0x517088[_0x1fccda(0x13f)][_0x1fccda(0x11f)][_0x1fccda(0x125)],'turboScaleUrl':_0x517088[_0x1fccda(0x13f)][_0x1fccda(0x11b)]},_0x49c6c5=process['argv'],[_0x23b155,_0x32e2c3]=helper[_0x1fccda(0xee)](_0x49c6c5),_0x525df0=path[_0x1fccda(0x11c)](process['cwd'](),_0x43dba9['NfCqi']);if(_0x43dba9[_0x1fccda(0xf3)](_0x32e2c3[_0x1fccda(0x113)],0x0)){helper[_0x1fccda(0xe3)](_0x525df0);for(let _0x2f9190=_0x43dba9[_0x1fccda(0x143)](_0x23b155[_0x1fccda(0x113)],0x1);_0x43dba9['oFNap'](_0x2f9190,0x0);_0x2f9190--){_0x49c6c5['splice'](_0x23b155[_0x2f9190],0x2);}}!helper[_0x1fccda(0x150)](_0x517088[_0x1fccda(0x13f)][_0x1fccda(0x119)])&&(process['env'][_0x1fccda(0x147)]=JSON[_0x1fccda(0x12f)](_0x517088[_0x1fccda(0x13f)][_0x1fccda(0x119)]));_0x43dba9[_0x1fccda(0xed)](_0x517088[_0x1fccda(0x13f)][_0x1fccda(0xdc)],null)?process['env'][_0x1fccda(0xde)]=_0x517088[_0x1fccda(0x13f)]['testObservability']:process[_0x1fccda(0xfb)][_0x1fccda(0xde)]=_0x43dba9[_0x1fccda(0x12c)];const _0x5cab6d=await TestHubHandler[_0x1fccda(0x137)](constants[_0x1fccda(0x135)][_0x1fccda(0x12a)],_0x517088);PerformanceTester[_0x1fccda(0x14c)](PerformanceEvents[_0x1fccda(0x12b)]);let _0x59236d;_0x43dba9['OLpiu'](parallelCucumberRun,_0x34a855,_0x366964,_0x517088['config'],_0x49c6c5,_0x32e2c3)['then'](async _0x2e6287=>{const _0x3dd783=_0x1fccda;PerformanceTester['start'](PerformanceEvents[_0x3dd783(0x151)]),_0x59236d=_0x2e6287;const _0x20c7bd=_0x43dba9[_0x3dd783(0x131)](printCucumberStats,_0x2e6287);process[_0x3dd783(0x13e)]=_0x20c7bd,_0x43dba9['aogow'](_0x32e2c3[_0x3dd783(0x113)],0x0)&&(logger[_0x3dd783(0x134)](_0x43dba9['VKHZp']),helper[_0x3dd783(0x101)](_0x525df0,_0x32e2c3),logger[_0x3dd783(0x134)](_0x43dba9[_0x3dd783(0x146)]),helper[_0x3dd783(0x129)](_0x525df0));})['finally'](async()=>{const _0xbcaf4b=_0x1fccda;PerformanceTester[_0xbcaf4b(0xfa)](PerformanceEvents['SDK_CLEANUP']),_0x517088['errorMessage']=helper[_0xbcaf4b(0x139)](_0x59236d,_0x43dba9[_0xbcaf4b(0x117)]),testOpsHelper[_0xbcaf4b(0x133)]();try{await TestHubHandler[_0xbcaf4b(0xeb)]();}catch(_0x198078){logger[_0xbcaf4b(0x134)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0xbcaf4b(0x140)](_0x198078));}try{const {browserstackFolderPath:_0x5cf328,tcgConfigPath:_0x2fbcdd}=helper[_0xbcaf4b(0xe0)]();fs[_0xbcaf4b(0x108)](_0x2fbcdd),fs[_0xbcaf4b(0xfd)](_0x5cf328);}catch(_0x2f2b54){logger[_0xbcaf4b(0x134)](_0x43dba9['BMRsF'],_0x2f2b54);}await utilities[_0xbcaf4b(0xf0)](_0x517088);});}module['exports']=run;