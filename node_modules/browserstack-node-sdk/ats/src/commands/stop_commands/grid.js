const a19_0x125339=a19_0x239c;(function(_0x2584af,_0x59b063){const _0x6ce046=a19_0x239c,_0x54c265=_0x2584af();while(!![]){try{const _0x3dcd96=-parseInt(_0x6ce046(0x1d5))/0x1*(-parseInt(_0x6ce046(0x1cb))/0x2)+parseInt(_0x6ce046(0x1f0))/0x3*(-parseInt(_0x6ce046(0x1d9))/0x4)+-parseInt(_0x6ce046(0x1ae))/0x5+-parseInt(_0x6ce046(0x1a7))/0x6+-parseInt(_0x6ce046(0x1cd))/0x7*(-parseInt(_0x6ce046(0x1ed))/0x8)+parseInt(_0x6ce046(0x1cf))/0x9+parseInt(_0x6ce046(0x1b0))/0xa*(-parseInt(_0x6ce046(0x1d7))/0xb);if(_0x3dcd96===_0x59b063)break;else _0x54c265['push'](_0x54c265['shift']());}catch(_0x3712d5){_0x54c265['push'](_0x54c265['shift']());}}}(a19_0xa0fc,0x5c870));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x125339(0x1a4)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x125339(0x1af)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleDownHubDeployment}=require(a19_0x125339(0x1c9)),{sendInstrumentationEvent}=require(a19_0x125339(0x1f2)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x125339(0x1cc));function a19_0xa0fc(){const _0x3c72ac=['region','18793thkcPI','debug','2937SWPWQO','builder','34828UTEpuy','Grid\x20stoppped.','replace','QHvTb','desc','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','<PasswordPlaceholder>','muItM','VNhbh','connectionTimeout','skipTlsCertVerify','string','Stopping\x20grid\x20','ERROR','clusterName','lMbai','stop-grid-called','command','IOLrN','cloudProvider','246992NcaGXk','info','Skip\x20insecure\x20cert\x20verification.','63cSRHVm','description','../../utils/instrumentationUtils','znKnI','user','existsSync','unauthorised','iugHO','Stop\x20a\x20running\x20Automation\x20grid.','yswJW','addListeners','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','stack','default','<UsernamePlaceholder>','clusterRegion','Browserstack','reconnecting-websocket','options','handler','1855584vRBCaq','body','skip-tls-cert-verify','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','MWzRY','username','name','2035660GchOUr','../../config/constants','7890wbDNiC','epilogue','readFileSync','grid-id','INFO','bstackAccesskey','Adding\x20Websocket\x20listeners','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','help','stop','usage','statusCode','grid','message','bpkEu','JWMPL','password','udqJS','init-not-called','wQTzI','IdHDp','hGlYp','gridId','hvMGf','type','../../utils/gridComponents','exit','46sIdBGy','../../cloudproviders/utils','154BRkDqg','error','3396879mjlIqE','BfhVs','WebSocket','stringify','gpNRH'];a19_0xa0fc=function(){return _0x3c72ac;};return a19_0xa0fc();}function a19_0x239c(_0x42037e,_0x73958e){const _0xa0fce4=a19_0xa0fc();return a19_0x239c=function(_0x239cc2,_0x771f3f){_0x239cc2=_0x239cc2-0x19c;let _0x17bc9d=_0xa0fce4[_0x239cc2];return _0x17bc9d;},a19_0x239c(_0x42037e,_0x73958e);}exports[a19_0x125339(0x1ea)]=a19_0x125339(0x1bc),exports[a19_0x125339(0x1dd)]=a19_0x125339(0x1f8),exports[a19_0x125339(0x1d8)]=function(_0x21d3d3){const _0x581878=a19_0x125339,_0x37fd0d={};_0x37fd0d[_0x581878(0x1c3)]=_0x581878(0x1de),_0x37fd0d['IbQPD']=_0x581878(0x1e4),_0x37fd0d[_0x581878(0x1c1)]=_0x581878(0x1ef),_0x37fd0d[_0x581878(0x1e0)]='boolean',_0x37fd0d['hvMGf']=_0x581878(0x1b8);const _0x56364b=_0x37fd0d,_0x2a5cd2={};_0x2a5cd2['description']=_0x56364b[_0x581878(0x1c3)],_0x2a5cd2['type']=_0x56364b['IbQPD'];const _0x296880={};_0x296880[_0x581878(0x1f1)]=_0x56364b[_0x581878(0x1c1)],_0x296880[_0x581878(0x1c8)]=_0x56364b['muItM'],_0x296880[_0x581878(0x1a0)]=![];const _0x3760cb={};return _0x3760cb[_0x581878(0x1b3)]=_0x2a5cd2,_0x3760cb[_0x581878(0x1a9)]=_0x296880,_0x21d3d3[_0x581878(0x1ba)](HELP_HEADER_MESSAGE[_0x581878(0x1b9)])[_0x581878(0x1b1)](HELP_FOOTER_MESSAGE)[_0x581878(0x1a5)](_0x3760cb)[_0x581878(0x1b8)](_0x56364b[_0x581878(0x1c7)])['argv'];},exports[a19_0x125339(0x1a6)]=async function(_0x3db37e){const _0x28fb44=a19_0x125339,_0x3bfbe2={'QHvTb':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','JWMPL':function(_0x1fd5c2){return _0x1fd5c2();},'IOLrN':_0x28fb44(0x1aa),'znKnI':function(_0x2dcaba,_0x501b89,_0x3a7f5e,_0x2ebdcc,_0x7715f9,_0x41b2f5,_0x3058cf){return _0x2dcaba(_0x501b89,_0x3a7f5e,_0x2ebdcc,_0x7715f9,_0x41b2f5,_0x3058cf);},'MWzRY':_0x28fb44(0x1e9),'iugHO':_0x28fb44(0x1c2),'OvsPf':function(_0x389716){return _0x389716();},'bpkEu':_0x28fb44(0x1a1),'wxbYL':_0x28fb44(0x1df),'VNhbh':_0x28fb44(0x1b6),'IdHDp':function(_0x14b580,_0x171801,_0x13a938,_0x3e85b1){return _0x14b580(_0x171801,_0x13a938,_0x3e85b1);},'HKRvZ':function(_0xd96b64,_0x28c7c6,_0x4350d5){return _0xd96b64(_0x28c7c6,_0x4350d5);},'lMbai':function(_0x59ca54,_0x2741bf,_0x5ea206){return _0x59ca54(_0x2741bf,_0x5ea206);},'fmzrM':_0x28fb44(0x1da),'BfhVs':function(_0x5ab259,_0x1b5d2b){return _0x5ab259===_0x1b5d2b;},'dNcrK':_0x28fb44(0x1b7),'yswJW':function(_0x8887cc,_0x14fbf1,_0x410e15,_0x1af3b7,_0x3305a7,_0x11afbc,_0x91b6c9){return _0x8887cc(_0x14fbf1,_0x410e15,_0x1af3b7,_0x3305a7,_0x11afbc,_0x91b6c9);},'gpNRH':_0x28fb44(0x1f6),'mlEhi':function(_0x41575c,_0x4a3340,_0x2c192f,_0x5c58b6,_0x3a7e3c,_0x54fb4c,_0x16d19b){return _0x41575c(_0x4a3340,_0x2c192f,_0x5c58b6,_0x3a7e3c,_0x54fb4c,_0x16d19b);},'EaxEK':'invalid-grid-id','hGlYp':function(_0x3973e9,_0x13bb62,_0x26b6d4,_0x38767a,_0x21cf95,_0x41440b,_0x5e99e8){return _0x3973e9(_0x13bb62,_0x26b6d4,_0x38767a,_0x21cf95,_0x41440b,_0x5e99e8);},'dxpsA':'server-error'};let _0xfdbfc2;try{!_0x3db37e[_0x28fb44(0x1c6)]&&(logger[_0x28fb44(0x1ce)](_0x3bfbe2[_0x28fb44(0x1dc)]),process[_0x28fb44(0x1ca)](0x1));!fs[_0x28fb44(0x1f5)](_0x3bfbe2[_0x28fb44(0x1bf)](getCredentialsPath))&&(logger['error'](_0x3bfbe2[_0x28fb44(0x1eb)]),await _0x3bfbe2[_0x28fb44(0x1f3)](sendInstrumentationEvent,_0x3db37e,_0x3bfbe2[_0x28fb44(0x1ab)],messageTypes[_0x28fb44(0x1e6)],_0x3bfbe2[_0x28fb44(0x1f7)],null,_0x3db37e),process[_0x28fb44(0x1ca)](0x1));logger[_0x28fb44(0x1ee)](_0x28fb44(0x1e5)+_0x3db37e[_0x28fb44(0x1c6)]),await _0x3bfbe2[_0x28fb44(0x1f3)](sendInstrumentationEvent,_0x3db37e,_0x3bfbe2[_0x28fb44(0x1ab)],messageTypes[_0x28fb44(0x1b4)],null,null,_0x3db37e);const _0x3936ba=JSON['parse'](fs[_0x28fb44(0x1b2)](_0x3bfbe2['OvsPf'](getCredentialsPath)));global_registry['bstackUsername']=_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1ac)],global_registry[_0x28fb44(0x1b5)]=_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1c0)];const _0x9ca356=WS_ENDPOINT[_0x28fb44(0x1db)](_0x3bfbe2[_0x28fb44(0x1be)],_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1ac)])['replace'](_0x3bfbe2['wxbYL'],_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1c0)]),_0xbb7332={};_0xbb7332[_0x28fb44(0x1d1)]=ws,_0xbb7332[_0x28fb44(0x1e2)]=0x36ee80,_0xfdbfc2=new ReconnectingWebSocket(_0x9ca356,[],_0xbb7332),logger[_0x28fb44(0x1d6)](_0x3bfbe2[_0x28fb44(0x1e1)]),webSocketUtils[_0x28fb44(0x19d)](_0xfdbfc2,_0x3db37e[_0x28fb44(0x1f4)],_0x3db37e[_0x28fb44(0x1c0)]);const [_0x264a4d,_0x4c32e7]=await _0x3bfbe2[_0x28fb44(0x1c4)](getGridDetails,_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1ac)],_0x3936ba[_0x28fb44(0x1a3)][_0x28fb44(0x1c0)],_0x3db37e[_0x28fb44(0x1c6)]);if(_0x4c32e7){const _0x1caf70=_0x4c32e7[_0x28fb44(0x1ee)];global_registry[_0x28fb44(0x1ec)]=_0x1caf70[_0x28fb44(0x1ec)],global_registry[_0x28fb44(0x1a2)]=_0x1caf70[_0x28fb44(0x1d4)],global_registry[_0x28fb44(0x1e7)]=_0x1caf70['clusterName'];const _0x473461=await _0x3bfbe2[_0x28fb44(0x1f3)](getCloudProviderObject,_0x1caf70[_0x28fb44(0x1ec)],_0x1caf70['clusterName'],_0x1caf70[_0x28fb44(0x1ad)],_0xfdbfc2,webSocketUtils,_0x3db37e),[_0x488151,_0x45196a,_0x5c3c8c,_0x33361e,_0xdfd72d,_0xdee369]=await _0x3bfbe2['HKRvZ'](createK8sClient,_0x473461,_0x3db37e[_0x28fb44(0x1e3)]);await _0x3bfbe2[_0x28fb44(0x1e8)](scaleDownHubDeployment,_0x45196a,_0x1caf70[_0x28fb44(0x1ad)]),logger[_0x28fb44(0x1ee)](_0x3bfbe2['fmzrM']),process['exit'](0x0);}_0x3bfbe2[_0x28fb44(0x1d0)](_0x264a4d['statusCode'],0x191)&&(logger[_0x28fb44(0x1ce)](_0x3bfbe2['dNcrK']),await _0x3bfbe2[_0x28fb44(0x19c)](sendInstrumentationEvent,_0x3db37e,_0x3bfbe2[_0x28fb44(0x1ab)],messageTypes[_0x28fb44(0x1e6)],_0x3bfbe2[_0x28fb44(0x1d3)],null,_0x3db37e),process[_0x28fb44(0x1ca)](0x1)),_0x3bfbe2['BfhVs'](_0x264a4d[_0x28fb44(0x1bb)],0x190)&&(logger['error'](JSON['parse'](_0x264a4d[_0x28fb44(0x1a8)])[_0x28fb44(0x1bd)]),await _0x3bfbe2['mlEhi'](sendInstrumentationEvent,_0x3db37e,_0x3bfbe2[_0x28fb44(0x1ab)],messageTypes[_0x28fb44(0x1e6)],_0x3bfbe2['EaxEK'],null,_0x3db37e),process[_0x28fb44(0x1ca)](0x1)),logger[_0x28fb44(0x1ce)](_0x28fb44(0x19e)+JSON[_0x28fb44(0x1d2)](_0x264a4d)),await _0x3bfbe2[_0x28fb44(0x1c5)](sendInstrumentationEvent,_0x3db37e,_0x3bfbe2[_0x28fb44(0x1ab)],messageTypes[_0x28fb44(0x1e6)],_0x3bfbe2['dxpsA'],_0x264a4d,_0x3db37e),process[_0x28fb44(0x1ca)](0x1);}catch(_0x3fd5a4){const _0x5b6ce4='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x3fd5a4+'\x20\x0a'+JSON['stringify'](_0x3fd5a4[_0x28fb44(0x19f)])+'\x20';logger[_0x28fb44(0x1ce)](_0x5b6ce4),process[_0x28fb44(0x1ca)](0x1);}};