#!/usr/bin/env node

const a45_0x4f31e7=a45_0x10f9;(function(_0x175461,_0x37bac0){const _0x5b3cf0=a45_0x10f9,_0x33f2be=_0x175461();while(!![]){try{const _0x55164b=parseInt(_0x5b3cf0(0x1b5))/0x1+parseInt(_0x5b3cf0(0x1cf))/0x2*(parseInt(_0x5b3cf0(0x1d8))/0x3)+parseInt(_0x5b3cf0(0x1df))/0x4+parseInt(_0x5b3cf0(0x1a6))/0x5*(parseInt(_0x5b3cf0(0x19b))/0x6)+-parseInt(_0x5b3cf0(0x1dc))/0x7*(parseInt(_0x5b3cf0(0x1c1))/0x8)+parseInt(_0x5b3cf0(0x1b6))/0x9*(parseInt(_0x5b3cf0(0x1a3))/0xa)+parseInt(_0x5b3cf0(0x1bf))/0xb*(-parseInt(_0x5b3cf0(0x1d5))/0xc);if(_0x55164b===_0x37bac0)break;else _0x33f2be['push'](_0x33f2be['shift']());}catch(_0x225c9f){_0x33f2be['push'](_0x33f2be['shift']());}}}(a45_0xc818,0xe2391));const fs=require('fs'),helper=require(a45_0x4f31e7(0x1d1)),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a45_0x4f31e7(0x1d0)),logger=require('../helpers/logger')['winstonLogger'],configFileTemplate=__dirname+a45_0x4f31e7(0x1da),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a45_0x4f31e7(0x1b9)]()+a45_0x4f31e7(0x1c6),packageFile=process[a45_0x4f31e7(0x1b9)]()+a45_0x4f31e7(0x1d7),frameworks=[a45_0x4f31e7(0x1c5),a45_0x4f31e7(0x1c4),'cucumber-js',a45_0x4f31e7(0x1c0),a45_0x4f31e7(0x1ae),a45_0x4f31e7(0x19f),'playwright'];let config;logger['info'](a45_0x4f31e7(0x1ca)),createConfigurationFile(yargs[a45_0x4f31e7(0x1cd)][a45_0x4f31e7(0x1c7)],yargs[a45_0x4f31e7(0x1cd)][a45_0x4f31e7(0x19a)],yargs['argv']['playwright']);function a45_0x10f9(_0x199399,_0x31c257){const _0xc8182b=a45_0xc818();return a45_0x10f9=function(_0x10f90d,_0x27e6d0){_0x10f90d=_0x10f90d-0x19a;let _0x18c08c=_0xc8182b[_0x10f90d];return _0x18c08c;},a45_0x10f9(_0x199399,_0x31c257);}try{sdkSetup();}catch(a45_0x43df7f){logger[a45_0x4f31e7(0x1d6)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x43df7f);}addScriptInPackageJson();function a45_0xc818(){const _0x48994b=['\x20&&\x20npm\x20update\x20browserstack-node-sdk','wjqHR','Creating\x20configuration\x20file...','browserstack-node-sdk','push','argv','hugmH','625718gxkTeb','yargs','../helpers/helper','join','tIPEg','node-setup','213516qEjvPo','debug','/package.json','9fGCdzp','load','/../../browserstack.yml.sample','GyJwf','21ofsmeC','eUHAx','TFdqx','5144688wVJBwJ','readFileSync','key','6682722iRSYmW','scripts','info','eHbdx','codeceptjs','isUndefined','error','writeFileSync','10oYeqvs','RKkeP','Syzzs','5Strupa','GizNJ','source','kILub','replace','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','utf8','SDKSetup','nightwatch','HBIdu','stringify','browserstack-node-sdk\x20','ioCCP','mqiae','postinstall','1829810qVSnSG','2360709VpkWVl','parse','BEZYc','cwd','nGOVC','bPwOA','indexOf','includes','RMeuV','2035elDaPZ','node','3232888bzixiM','npm\x20update\x20browserstack-node-sdk','length','jest','mocha','/browserstack.yml','username'];a45_0xc818=function(){return _0x48994b;};return a45_0xc818();}function createConfigurationFile(_0x3cc53b,_0x2b5bc6,_0x8ec7ce=![]){const _0x4b7343=a45_0x4f31e7,_0x5d9e44={};_0x5d9e44[_0x4b7343(0x1bb)]=_0x4b7343(0x1ac),_0x5d9e44[_0x4b7343(0x1b3)]='YOUR_USERNAME',_0x5d9e44[_0x4b7343(0x1be)]='YOUR_ACCESS_KEY';const _0x52bde1=_0x5d9e44;try{let _0x5d3052=fs['readFileSync'](_0x8ec7ce?configFileTemplatePW:configFileTemplate,_0x52bde1[_0x4b7343(0x1bb)]);_0x3cc53b&&(_0x5d3052=_0x5d3052[_0x4b7343(0x1aa)](_0x52bde1[_0x4b7343(0x1b3)],_0x3cc53b)),_0x2b5bc6&&(_0x5d3052=_0x5d3052['replace'](_0x52bde1['RMeuV'],_0x2b5bc6)),config=yaml[_0x4b7343(0x1d9)](_0x5d3052),fs[_0x4b7343(0x1a2)](configFile,_0x5d3052,_0xbca13a=>{_0xbca13a&&logger['error'](_0xbca13a);});}catch(_0x215bec){logger[_0x4b7343(0x1a1)](_0x215bec);}}function addPostInstallScript(_0x576c35,_0x29710c){const _0x293993=a45_0x4f31e7,_0x1925da={};_0x1925da['Syzzs']=_0x293993(0x1b4),_0x1925da[_0x293993(0x1d3)]=_0x293993(0x1c2),_0x1925da[_0x293993(0x1a7)]=_0x293993(0x1c8);const _0x4e030a=_0x1925da;let _0x1e55c6=_0x576c35[_0x4e030a[_0x293993(0x1a5)]];if(_0x1e55c6&&_0x1e55c6[_0x293993(0x1bd)](_0x4e030a[_0x293993(0x1d3)]))return;!_0x1e55c6?_0x1e55c6=_0x4e030a[_0x293993(0x1d3)]:_0x1e55c6+=_0x4e030a['GizNJ'],_0x29710c[_0x293993(0x1cc)]([_0x4e030a[_0x293993(0x1a5)],_0x1e55c6]);}function addScriptInPackageJson(){const _0x485f43=a45_0x4f31e7,_0x4e2c6d={'GyJwf':_0x485f43(0x1ac),'RKkeP':function(_0x261076,_0x138f6b){return _0x261076<_0x138f6b;},'TFdqx':function(_0xef189e,_0x406654,_0x4392f9){return _0xef189e(_0x406654,_0x4392f9);},'RZFKy':function(_0x3b65f5,_0x40af27,_0x2b16c7){return _0x3b65f5(_0x40af27,_0x2b16c7);},'kILub':function(_0x4a574d,_0x445135,_0x3bd96e){return _0x4a574d(_0x445135,_0x3bd96e);},'HBIdu':function(_0x27eeb3,_0x674d6c){return _0x27eeb3!==_0x674d6c;},'hugmH':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x5be8de=JSON[_0x485f43(0x1b7)](fs[_0x485f43(0x1e0)](packageFile,_0x4e2c6d[_0x485f43(0x1db)])),_0x10aef9=[];for(let _0x56768e=0x0;_0x4e2c6d['RKkeP'](_0x56768e,frameworks['length']);_0x56768e+=0x1){const _0x47d2ca=_0x4e2c6d[_0x485f43(0x1de)](findScriptsWithFramework,_0x5be8de[_0x485f43(0x19c)],frameworks[_0x56768e]);for(let _0x2266c1=0x0;_0x4e2c6d[_0x485f43(0x1a4)](_0x2266c1,_0x47d2ca[_0x485f43(0x1c3)]);_0x2266c1+=0x1){_0x10aef9[_0x485f43(0x1cc)](_0x4e2c6d['RZFKy'](getUpdatedCommand,_0x5be8de[_0x485f43(0x19c)],_0x47d2ca[_0x2266c1]));}_0x4e2c6d[_0x485f43(0x1a9)](addPostInstallScript,_0x5be8de[_0x485f43(0x19c)],_0x10aef9);}const _0x25a265={..._0x5be8de[_0x485f43(0x19c)]},_0x4a0f62=_0x25a265;for(let _0x53f36d=0x0;_0x4e2c6d[_0x485f43(0x1a4)](_0x53f36d,_0x10aef9[_0x485f43(0x1c3)]);_0x53f36d+=0x1){_0x4a0f62[_0x10aef9[_0x53f36d][0x0]]=_0x10aef9[_0x53f36d][0x1];}_0x4e2c6d[_0x485f43(0x1af)](JSON[_0x485f43(0x1b0)](_0x5be8de[_0x485f43(0x19c)]),JSON[_0x485f43(0x1b0)](_0x4a0f62))&&(logger[_0x485f43(0x19d)](_0x4e2c6d[_0x485f43(0x1ce)]),_0x5be8de['scripts']=_0x4a0f62,fs[_0x485f43(0x1a2)](packageFile,JSON[_0x485f43(0x1b0)](_0x5be8de,null,0x2),_0x6abc83=>{const _0x27a139=_0x485f43;_0x6abc83&&logger[_0x27a139(0x1a1)](_0x6abc83);}));};function findScriptsWithFramework(_0x349d6a,_0x13b912){const _0x31d7d5=a45_0x4f31e7,_0x9e3add={};_0x9e3add[_0x31d7d5(0x1ba)]=function(_0x133814,_0x1e55a8){return _0x133814<_0x1e55a8;},_0x9e3add[_0x31d7d5(0x1b8)]=_0x31d7d5(0x1cb);const _0x37e95f=_0x9e3add,_0x43bbb9=[],_0x30b6bb=Object['entries'](_0x349d6a);for(let _0x4123b0=0x0;_0x37e95f[_0x31d7d5(0x1ba)](_0x4123b0,_0x30b6bb[_0x31d7d5(0x1c3)]);_0x4123b0+=0x1){_0x30b6bb[_0x4123b0][0x1][_0x31d7d5(0x1bd)](_0x13b912)&&!_0x30b6bb[_0x4123b0][0x1][_0x31d7d5(0x1bd)](_0x37e95f[_0x31d7d5(0x1b8)])&&_0x43bbb9[_0x31d7d5(0x1cc)](_0x30b6bb[_0x4123b0][0x0]);}return _0x43bbb9;}function getUpdatedCommand(_0x5da2d9,_0x53cf6e){const _0x2b5443=a45_0x4f31e7,_0x33eea7={};_0x33eea7[_0x2b5443(0x1b2)]=function(_0xe78bc7,_0x349fd9){return _0xe78bc7!==_0x349fd9;},_0x33eea7[_0x2b5443(0x1c9)]=_0x2b5443(0x1cb),_0x33eea7[_0x2b5443(0x1dd)]=function(_0x47f100,_0x280664){return _0x47f100===_0x280664;};const _0x47f77a=_0x33eea7,_0x288209=_0x53cf6e+'-browserstack',_0x35924b=_0x5da2d9[_0x53cf6e],_0x3d8810=_0x35924b['split']('\x20');for(const _0x4c0cf4 of frameworks){if(_0x47f77a[_0x2b5443(0x1b2)](_0x3d8810[_0x2b5443(0x1bc)](_0x4c0cf4),-0x1)){_0x3d8810['splice'](_0x3d8810['indexOf'](_0x4c0cf4),0x0,_0x47f77a[_0x2b5443(0x1c9)]);break;}}let _0x38a544=_0x3d8810[_0x2b5443(0x1d2)]('\x20');return _0x47f77a[_0x2b5443(0x1dd)](_0x38a544,_0x35924b)&&(_0x38a544=_0x2b5443(0x1b1)+_0x35924b),[_0x288209,_0x38a544];}function sdkSetup(){const _0x1f1aff=a45_0x4f31e7,_0x117a92={};_0x117a92[_0x1f1aff(0x19e)]=_0x1f1aff(0x1d4),_0x117a92['QzQle']=_0x1f1aff(0x1ad);const _0x5747da=_0x117a92;if(helper[_0x1f1aff(0x1a0)](config))return;config[_0x1f1aff(0x1a8)]=_0x5747da[_0x1f1aff(0x19e)];try{utilities['fireFunnelTestEvent'](_0x5747da['QzQle'],{},config,'');}catch(_0x1ec672){logger[_0x1f1aff(0x1d6)](_0x1f1aff(0x1ab)+_0x1ec672);}}logger[a45_0x4f31e7(0x19d)]('Setup\x20completed');