function a72_0x24d6(_0x1ed6c4,_0x3c1cae){const _0x1688c6=a72_0x1688();return a72_0x24d6=function(_0x24d6fd,_0x49e9b9){_0x24d6fd=_0x24d6fd-0x8b;let _0x12e521=_0x1688c6[_0x24d6fd];return _0x12e521;},a72_0x24d6(_0x1ed6c4,_0x3c1cae);}const a72_0x5d435d=a72_0x24d6;(function(_0x30a6b6,_0x3a0f7a){const _0x2948a6=a72_0x24d6,_0x470d1b=_0x30a6b6();while(!![]){try{const _0x12d45a=parseInt(_0x2948a6(0xce))/0x1+parseInt(_0x2948a6(0xf7))/0x2+-parseInt(_0x2948a6(0x9f))/0x3*(parseInt(_0x2948a6(0x8e))/0x4)+-parseInt(_0x2948a6(0xa7))/0x5+-parseInt(_0x2948a6(0xe8))/0x6+-parseInt(_0x2948a6(0xca))/0x7*(-parseInt(_0x2948a6(0xec))/0x8)+-parseInt(_0x2948a6(0xb4))/0x9;if(_0x12d45a===_0x3a0f7a)break;else _0x470d1b['push'](_0x470d1b['shift']());}catch(_0x3f6193){_0x470d1b['push'](_0x470d1b['shift']());}}}(a72_0x1688,0xae210));const {https}=require('follow-redirects'),url=require(a72_0x5d435d(0x10f)),yauzl=require(a72_0x5d435d(0x107)),fs=require('fs'),path=require(a72_0x5d435d(0x9b)),os=require('os'),{spawn}=require(a72_0x5d435d(0xfa)),HttpsProxyAgent=require(a72_0x5d435d(0xb6)),logger=require('../logger')['winstonLogger'];class PercyBinary{#hostOS=process['platform'];#httpPath=null;#binaryName=a72_0x5d435d(0xbb);#orderedPaths=[path['join'](this.#homedir(),a72_0x5d435d(0xfd)),process['cwd'](),os[a72_0x5d435d(0xc3)]()];constructor(){const _0x36f5c5=a72_0x5d435d,_0x339d5e={};_0x339d5e[_0x36f5c5(0xa2)]=_0x36f5c5(0xa5),_0x339d5e['jZcSd']=function(_0x12d125,_0x4b5dfe){return _0x12d125+_0x4b5dfe;},_0x339d5e['nwJiN']=_0x36f5c5(0xc1),_0x339d5e[_0x36f5c5(0x8b)]=function(_0x4ecc20,_0x120d74){return _0x4ecc20+_0x120d74;},_0x339d5e[_0x36f5c5(0x108)]='/percy-win.zip',_0x339d5e[_0x36f5c5(0xcf)]=_0x36f5c5(0x8d),_0x339d5e[_0x36f5c5(0xe9)]=_0x36f5c5(0xc8);const _0x5a5877=_0x339d5e,_0x3c5e69=_0x5a5877['acxRN'];if(this.#hostOS[_0x36f5c5(0xc6)](/darwin|mac os/i))this.#httpPath=_0x5a5877[_0x36f5c5(0xc0)](_0x3c5e69,_0x5a5877[_0x36f5c5(0xe5)]);else this.#hostOS[_0x36f5c5(0xc6)](/mswin|msys|mingw|cygwin|bccwin|wince|emc|win32/i)?(this.#httpPath=_0x5a5877[_0x36f5c5(0x8b)](_0x3c5e69,_0x5a5877[_0x36f5c5(0x108)]),this.#binaryName=_0x5a5877[_0x36f5c5(0xcf)]):this.#httpPath=_0x5a5877[_0x36f5c5(0x8b)](_0x3c5e69,_0x5a5877[_0x36f5c5(0xe9)]);}#getAvailableDirs(){const _0x2d750=a72_0x5d435d,_0x44d2a7={};_0x44d2a7[_0x2d750(0xba)]=function(_0x5dc0d5,_0x56bd1f){return _0x5dc0d5<_0x56bd1f;},_0x44d2a7[_0x2d750(0xe3)]='Error\x20trying\x20to\x20download\x20percy\x20binary';const _0x4ad8f=_0x44d2a7;for(var _0x58fcb0=0x0;_0x4ad8f[_0x2d750(0xba)](_0x58fcb0,this.#orderedPaths[_0x2d750(0x9d)]);_0x58fcb0++){var _0x4c1380=this.#orderedPaths[_0x58fcb0];if(this.#makePath(_0x4c1380))return _0x4c1380;}throw new Error(_0x4ad8f[_0x2d750(0xe3)]);}#makePath(_0x15ed84){const _0x22cac6=a72_0x5d435d;try{return!this.#checkPath(_0x15ed84)&&fs[_0x22cac6(0xee)](_0x15ed84),!![];}catch{return![];}}#checkPath(_0x43de5d,_0x2b6d6a){const _0xe245c7=a72_0x5d435d,_0x2f926f={};_0x2f926f[_0xe245c7(0xd6)]=function(_0x3e9db3,_0x3703e6){return _0x3e9db3|_0x3703e6;},_0x2f926f[_0xe245c7(0xf2)]=function(_0x300ed0,_0x37cea5){return _0x300ed0!==_0x37cea5;},_0x2f926f['Jnkwn']=_0xe245c7(0xb9);const _0x34ddb5=_0x2f926f;_0x2b6d6a=_0x2b6d6a||_0x34ddb5['HVeVn'](fs[_0xe245c7(0x102)],fs['W_OK']);try{return fs['accessSync'](_0x43de5d,_0x2b6d6a),!![];}catch(_0x1e3d67){if(_0x34ddb5[_0xe245c7(0xf2)](typeof fs[_0xe245c7(0xc7)],_0x34ddb5[_0xe245c7(0xd0)]))return![];try{return fs[_0xe245c7(0xd1)](_0x43de5d),!![];}catch(_0x2cc265){return![];}}}async['getBinaryPath'](_0xe72a11){const _0x2d3321=a72_0x5d435d,_0x5eb632={};_0x5eb632[_0x2d3321(0xa1)]=_0x2d3321(0xb1);const _0x5098ab=_0x5eb632;var _0x2f7099=this.#getAvailableDirs(),_0x3f1c94=path[_0x2d3321(0xfc)](_0x2f7099,this.#binaryName);if(this.#checkPath(_0x3f1c94,fs[_0x2d3321(0xf5)]))return _0x3f1c94;const _0x1cdcff=await this['download'](_0xe72a11,_0x2f7099),_0x113659=await this[_0x2d3321(0xcd)](_0x1cdcff);if(!_0x113659)return logger[_0x2d3321(0x103)](_0x5098ab['HzgtR']),await this[_0x2d3321(0xf1)](_0xe72a11,_0x2f7099);return _0x1cdcff;}async[a72_0x5d435d(0xcd)](_0x1292e1){const _0xd95ff2=a72_0x5d435d,_0x23c9d7={'TRnNr':function(_0x546843,_0xc31cd){return _0x546843(_0xc31cd);},'AeuOu':function(_0x2a3aef,_0x1ad582,_0xeaf382){return _0x2a3aef(_0x1ad582,_0xeaf382);},'eVzWy':_0xd95ff2(0xa9),'kceGi':_0xd95ff2(0xdc),'tUcUn':_0xd95ff2(0xbd)},_0x5542bd=/^.*@percy\/cli \d.\d+.\d+/;return new Promise((_0x5d4ec6,_0x416a95)=>{const _0x1c1aad=_0xd95ff2,_0x3db51c={'YaPTL':function(_0x50abb5,_0x349663){const _0xb29350=a72_0x24d6;return _0x23c9d7[_0xb29350(0xa0)](_0x50abb5,_0x349663);}},_0x31d2f0=_0x23c9d7[_0x1c1aad(0xb5)](spawn,_0x1292e1,[_0x23c9d7['eVzWy']]);_0x31d2f0[_0x1c1aad(0xdd)]['on'](_0x23c9d7[_0x1c1aad(0xb2)],_0x463c0c=>{const _0x183bb9=_0x1c1aad;_0x5542bd[_0x183bb9(0xff)](_0x463c0c)&&_0x23c9d7['TRnNr'](_0x5d4ec6,!![]);}),_0x31d2f0['on'](_0x23c9d7[_0x1c1aad(0xda)],()=>{_0x3db51c['YaPTL'](_0x5d4ec6,![]);});});}[a72_0x5d435d(0xf1)](_0x564bd5,_0x4f45cb){const _0x24366d=a72_0x5d435d,_0x2e001b={'KhabA':_0x24366d(0xbc),'EymbD':function(_0x9c97ac,_0xfab5e1){return _0x9c97ac(_0xfab5e1);},'vUkiD':_0x24366d(0x9c),'RrVGd':'entry','jQZGZ':_0x24366d(0x103),'cyRdJ':_0x24366d(0xa4),'SJILN':function(_0x339185,_0x2b308a){return _0x339185===_0x2b308a;},'ODKxa':_0x24366d(0xbd),'rbVDA':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file','KsQZJ':_0x24366d(0x100),'zRzwz':function(_0x185629,_0x49c4ff){return _0x185629(_0x49c4ff);},'crxjo':function(_0x4925b0,_0x2c73cc){return _0x4925b0+_0x2c73cc;},'zdQAX':_0x24366d(0x10d),'oqdGe':_0x24366d(0x105)};!this.#checkPath(_0x4f45cb)&&fs['mkdirSync'](_0x4f45cb);const _0xe5f42f=this.#binaryName,_0x373277=path[_0x24366d(0xfc)](_0x4f45cb,_0x2e001b[_0x24366d(0x92)](_0xe5f42f,_0x2e001b['zdQAX'])),_0x1bfc9b=path[_0x24366d(0xfc)](_0x4f45cb,_0xe5f42f),_0x3fac5f=fs['createWriteStream'](_0x373277),_0x34c16e=url[_0x24366d(0x95)](this.#httpPath);if(_0x564bd5[_0x24366d(0xe7)]&&_0x564bd5[_0x24366d(0xc9)]){const _0x48d4b7={};_0x48d4b7[_0x24366d(0xeb)]=_0x564bd5[_0x24366d(0xe7)],_0x48d4b7[_0x24366d(0xd7)]=_0x564bd5[_0x24366d(0xc9)],_0x34c16e[_0x24366d(0x91)]=new HttpsProxyAgent(_0x48d4b7);}if(_0x564bd5[_0x24366d(0x10a)])try{_0x34c16e['ca']=fs[_0x24366d(0x93)](_0x564bd5[_0x24366d(0x10a)]);}catch(_0x4aabea){logger[_0x24366d(0x103)](_0x2e001b[_0x24366d(0x101)],_0x4aabea);}return new Promise((_0x20672f,_0x36f3c7)=>{const _0x10c3f2=_0x24366d,_0x4fcdc3={'IqfVi':_0x2e001b[_0x10c3f2(0xf3)],'LUZjT':function(_0x114ed6,_0x20695f){const _0x3b8a2d=_0x10c3f2;return _0x2e001b[_0x3b8a2d(0x10c)](_0x114ed6,_0x20695f);},'fXfRT':_0x2e001b[_0x10c3f2(0xa3)],'KFtmL':function(_0xa68f68,_0x3981ee){const _0x23bea1=_0x10c3f2;return _0x2e001b[_0x23bea1(0xf6)](_0xa68f68,_0x3981ee);}};https['get'](_0x34c16e,function(_0x660379){const _0xadb641=_0x10c3f2,_0x5cc83a={'KOVMn':_0x2e001b[_0xadb641(0xf8)],'UoEAI':function(_0x391818,_0x80a1be){const _0x1d265c=_0xadb641;return _0x2e001b[_0x1d265c(0x10c)](_0x391818,_0x80a1be);},'kFiLB':function(_0x165e6c,_0x2fa568){const _0x175fd8=_0xadb641;return _0x2e001b[_0x175fd8(0x10c)](_0x165e6c,_0x2fa568);},'fDkgF':_0x2e001b[_0xadb641(0xa6)],'iXyxC':function(_0x18ce03,_0x307b32){const _0x1adeb6=_0xadb641;return _0x2e001b[_0x1adeb6(0x10c)](_0x18ce03,_0x307b32);},'hsnbx':_0x2e001b[_0xadb641(0xfb)],'OTVxm':_0x2e001b[_0xadb641(0xf0)],'hGnYc':_0x2e001b[_0xadb641(0x90)],'cadpn':function(_0x55a08b,_0x39011e){const _0x3f9891=_0xadb641;return _0x2e001b[_0x3f9891(0xd4)](_0x55a08b,_0x39011e);}};_0x660379[_0xadb641(0xe2)](_0x3fac5f),_0x660379['on'](_0x2e001b[_0xadb641(0xf0)],function(_0x47800a){const _0x1e086c=_0xadb641;logger['error'](_0x5cc83a[_0x1e086c(0xd3)],_0x47800a),_0x5cc83a[_0x1e086c(0xad)](_0x36f3c7,_0x47800a);}),_0x3fac5f['on'](_0x2e001b['jQZGZ'],function(_0x2e659d){const _0x4020cd=_0xadb641;logger[_0x4020cd(0x103)](_0x4fcdc3['IqfVi'],_0x2e659d),_0x4fcdc3['LUZjT'](_0x36f3c7,_0x2e659d);}),_0x3fac5f['on'](_0x2e001b['ODKxa'],function(){const _0x4d9ef1=_0xadb641,_0x581b9b={'SIKQV':function(_0xddd81f,_0x221a1c){const _0x38fa87=a72_0x24d6;return _0x5cc83a[_0x38fa87(0xad)](_0xddd81f,_0x221a1c);},'kifMl':_0x5cc83a[_0x4d9ef1(0xef)],'cZkGD':function(_0x2f975d,_0xa4089d){const _0x26a779=_0x4d9ef1;return _0x5cc83a[_0x26a779(0x98)](_0x2f975d,_0xa4089d);}},_0x683742={};_0x683742['lazyEntries']=!![],yauzl[_0x4d9ef1(0xd2)](_0x373277,_0x683742,function(_0x76a4a0,_0x63fe49){const _0x54f7b7=_0x4d9ef1,_0x6cfd1={'BIfwq':function(_0x141ea7,_0x556ee4){return _0x5cc83a['kFiLB'](_0x141ea7,_0x556ee4);},'JUASw':_0x5cc83a[_0x54f7b7(0xbf)]};_0x76a4a0&&_0x5cc83a[_0x54f7b7(0xea)](_0x36f3c7,_0x76a4a0),_0x63fe49[_0x54f7b7(0xc4)](),_0x63fe49['on'](_0x5cc83a[_0x54f7b7(0x96)],_0x50d22a=>{const _0x2b9f32=_0x54f7b7,_0x6f2827={'glcux':function(_0x354b78,_0x3d0bc0){return _0x581b9b['SIKQV'](_0x354b78,_0x3d0bc0);},'AVPBw':_0x581b9b[_0x2b9f32(0xac)]};if(/\/$/[_0x2b9f32(0xff)](_0x50d22a[_0x2b9f32(0x9e)]))_0x63fe49['readEntry']();else{const _0x39fd81=fs[_0x2b9f32(0xaa)](path['join'](_0x4f45cb,_0x50d22a[_0x2b9f32(0x9e)]));_0x63fe49['openReadStream'](_0x50d22a,function(_0x4b7777,_0x2f7d53){const _0x599d1b=_0x2b9f32;_0x4b7777&&_0x6f2827[_0x599d1b(0xd9)](_0x36f3c7,_0x76a4a0),_0x2f7d53['on'](_0x6f2827[_0x599d1b(0xfe)],function(){_0x39fd81['close'](),_0x63fe49['readEntry']();}),_0x2f7d53['pipe'](_0x39fd81);}),_0x581b9b[_0x2b9f32(0xe6)](_0x50d22a[_0x2b9f32(0x9e)],_0xe5f42f)&&_0x63fe49[_0x2b9f32(0xbd)]();}}),_0x63fe49['on'](_0x5cc83a[_0x54f7b7(0xdf)],_0x26dd2c=>{const _0x4a6ff3=_0x54f7b7;_0x6cfd1[_0x4a6ff3(0xbe)](_0x36f3c7,_0x26dd2c);}),_0x63fe49[_0x54f7b7(0xe4)](_0x5cc83a[_0x54f7b7(0xef)],()=>{const _0x1eba64=_0x54f7b7,_0x49ef9e={'bZwlY':function(_0x28c098,_0x69b4e7){const _0x54c8a7=a72_0x24d6;return _0x6cfd1[_0x54c8a7(0xbe)](_0x28c098,_0x69b4e7);},'cbWtR':function(_0x5815d9,_0x2c072c){const _0x1e94f9=a72_0x24d6;return _0x6cfd1[_0x1e94f9(0xbe)](_0x5815d9,_0x2c072c);}};fs['chmod'](_0x1bfc9b,_0x6cfd1[_0x1eba64(0xf9)],function(_0x389da5){const _0x50443e=_0x1eba64;_0x389da5&&_0x49ef9e['bZwlY'](_0x36f3c7,_0x389da5),_0x49ef9e[_0x50443e(0xe0)](_0x20672f,_0x1bfc9b);}),_0x63fe49['close']();});});});})['on'](_0x2e001b['jQZGZ'],function(_0x23c040){logger['error'](_0x4fcdc3['fXfRT'],_0x23c040),_0x4fcdc3['KFtmL'](_0x36f3c7,_0x23c040);});});}#homedir(){const _0x152f42=a72_0x5d435d,_0x2bc3ad={};_0x2bc3ad[_0x152f42(0xc5)]=function(_0x42f681,_0x272202){return _0x42f681===_0x272202;},_0x2bc3ad[_0x152f42(0xcb)]=_0x152f42(0xb7),_0x2bc3ad[_0x152f42(0x9a)]=_0x152f42(0xdb),_0x2bc3ad['MifYv']=function(_0x129e77,_0x276d2e){return _0x129e77+_0x276d2e;},_0x2bc3ad[_0x152f42(0xb3)]=function(_0x31104a,_0x3fae87){return _0x31104a===_0x3fae87;},_0x2bc3ad[_0x152f42(0xc2)]=_0x152f42(0x8c),_0x2bc3ad[_0x152f42(0xcc)]=function(_0x5abbef,_0x274ac3){return _0x5abbef+_0x274ac3;},_0x2bc3ad['pnyLb']=_0x152f42(0x104),_0x2bc3ad[_0x152f42(0x10b)]=function(_0x405f33,_0xd5c4fa){return _0x405f33===_0xd5c4fa;},_0x2bc3ad['cDlNB']='linux',_0x2bc3ad[_0x152f42(0xe1)]='/root',_0x2bc3ad[_0x152f42(0x106)]=function(_0x19dc50,_0x5cadda){return _0x19dc50+_0x5cadda;},_0x2bc3ad[_0x152f42(0x10e)]=_0x152f42(0xaf),_0x2bc3ad['tMATn']=function(_0x12e57d,_0x558011){return _0x12e57d||_0x558011;};const _0x2a2c04=_0x2bc3ad;if(_0x2a2c04[_0x152f42(0xc5)](typeof os[_0x152f42(0xb8)],_0x2a2c04[_0x152f42(0xcb)]))return os['homedir']();const _0x34daa3=process[_0x152f42(0x109)],_0x1a2c6d=_0x34daa3['HOME'],_0x12a493=_0x34daa3[_0x152f42(0xf4)]||_0x34daa3[_0x152f42(0xae)]||_0x34daa3[_0x152f42(0xed)]||_0x34daa3[_0x152f42(0xa8)];if(_0x2a2c04[_0x152f42(0xc5)](process[_0x152f42(0xd8)],_0x2a2c04[_0x152f42(0x9a)]))return _0x34daa3[_0x152f42(0xde)]||_0x2a2c04[_0x152f42(0x8f)](_0x34daa3[_0x152f42(0xd5)],_0x34daa3[_0x152f42(0xb0)])||_0x1a2c6d||null;if(_0x2a2c04[_0x152f42(0xb3)](process['platform'],_0x2a2c04[_0x152f42(0xc2)]))return _0x1a2c6d||(_0x12a493?_0x2a2c04[_0x152f42(0xcc)](_0x2a2c04[_0x152f42(0x99)],_0x12a493):null);if(_0x2a2c04[_0x152f42(0x10b)](process[_0x152f42(0xd8)],_0x2a2c04[_0x152f42(0xab)]))return _0x1a2c6d||(_0x2a2c04[_0x152f42(0x10b)](process[_0x152f42(0x94)](),0x0)?_0x2a2c04[_0x152f42(0xe1)]:_0x12a493?_0x2a2c04[_0x152f42(0x106)](_0x2a2c04[_0x152f42(0x10e)],_0x12a493):null);return _0x2a2c04['tMATn'](_0x1a2c6d,null);}}module[a72_0x5d435d(0x97)]=PercyBinary;function a72_0x1688(){const _0x34b2f6=['cyRdJ','agent','crxjo','readFileSync','getuid','parse','hsnbx','exports','cadpn','pnyLb','WnFNT','path','0755','length','fileName','6bgONAC','TRnNr','HzgtR','acxRN','KsQZJ','end','https://github.com/percy/cli/releases/latest/download','vUkiD','670450FudaUR','USERNAME','--version','createWriteStream','cDlNB','kifMl','UoEAI','USER','/home/','HOMEPATH','Corrupt\x20percy\x20binary,\x20retrying','kceGi','kwMDf','5769810UnopvB','AeuOu','https-proxy-agent','function','homedir','undefined','dHZpI','percy','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response','close','BIfwq','fDkgF','jZcSd','/percy-osx.zip','sYgGf','tmpdir','readEntry','ZMAlV','match','accessSync','/percy-linux.zip','proxyPort','70uKJLUP','WkNSd','scRcQ','validateBinary','1191488XeVImM','eRtTb','Jnkwn','statSync','open','KOVMn','SJILN','HOMEDRIVE','HVeVn','port','platform','glcux','tUcUn','win32','data','stdout','USERPROFILE','OTVxm','cbWtR','BhACO','pipe','uBoEf','once','nwJiN','cZkGD','proxyHost','5902368TzVvPa','ipOZb','iXyxC','host','888344oZyHss','LNAME','mkdirSync','hGnYc','jQZGZ','download','mLsVl','rbVDA','LOGNAME','X_OK','zRzwz','545772zVWtYq','KhabA','JUASw','child_process','RrVGd','join','.browserstack','AVPBw','test','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request','oqdGe','R_OK','error','/Users/','Percy\x20download\x20failed\x20to\x20read\x20cert\x20file','sSFAQ','yauzl','cVHBt','env','useCaCertificate','QAPYy','EymbD','.zip','SzgSi','url','fxHqc','darwin','percy.exe','205328SAPQqB','MifYv'];a72_0x1688=function(){return _0x34b2f6;};return a72_0x1688();}