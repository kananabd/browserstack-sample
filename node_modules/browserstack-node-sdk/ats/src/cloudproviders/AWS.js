const a0_0x1dba5e=a0_0x46eb;(function(_0x4a3ac9,_0x2227b7){const _0x55e0b3=a0_0x46eb,_0x364382=_0x4a3ac9();while(!![]){try{const _0x53d157=-parseInt(_0x55e0b3(0x1f1))/0x1+-parseInt(_0x55e0b3(0x241))/0x2*(parseInt(_0x55e0b3(0x321))/0x3)+parseInt(_0x55e0b3(0x32e))/0x4*(parseInt(_0x55e0b3(0x2d2))/0x5)+parseInt(_0x55e0b3(0x236))/0x6+-parseInt(_0x55e0b3(0x209))/0x7+-parseInt(_0x55e0b3(0x276))/0x8*(-parseInt(_0x55e0b3(0x1f9))/0x9)+parseInt(_0x55e0b3(0x26c))/0xa;if(_0x53d157===_0x2227b7)break;else _0x364382['push'](_0x364382['shift']());}catch(_0x1771b8){_0x364382['push'](_0x364382['shift']());}}}(a0_0x2369,0xa6c24));const fs=require('fs'),path=require(a0_0x1dba5e(0x2cd)),yaml=require(a0_0x1dba5e(0x25d)),awsSDK=require(a0_0x1dba5e(0x22d)),{logger}=require('../config/logger'),{CloudProvider}=require(a0_0x1dba5e(0x28a)),{sendAWSInfoToHST}=require('../utils/hstUtils'),{createClusterStack}=require(a0_0x1dba5e(0x330)),{createHubHaStack}=require(a0_0x1dba5e(0x309)),{deleteClusterAndDependencies,deleteRoutingDeps,deleteAgent}=require('../utils/gridComponents'),{createAutoscalerStack}=require(a0_0x1dba5e(0x2a4)),{getDirForConfig,reportToGalactusAndSendToEDS,kubeApply}=require(a0_0x1dba5e(0x2f3)),{IAM_USER_NAME,AWS,WS_EVENTS,global_registry,messageTypes}=require(a0_0x1dba5e(0x29f));function a0_0x46eb(_0x53be20,_0x3aa1b5){const _0x236980=a0_0x2369();return a0_0x46eb=function(_0x46ebd5,_0x22f201){_0x46ebd5=_0x46ebd5-0x1d9;let _0x16de0c=_0x236980[_0x46ebd5];return _0x16de0c;},a0_0x46eb(_0x53be20,_0x3aa1b5);}class AWSCloudProvider extends CloudProvider{constructor(_0x1b6ac8,_0xfd233a,_0x463a0d,_0x4e18bf){super(AWS,_0x1b6ac8,_0xfd233a,_0x463a0d,_0x4e18bf);}async[a0_0x1dba5e(0x217)](){const _0x43e4f7=a0_0x1dba5e;await super[_0x43e4f7(0x217)]();const _0x1ee16f={};return _0x1ee16f[_0x43e4f7(0x314)]=global_registry['clusterRegion'],_0x1ee16f[_0x43e4f7(0x2fd)]=global_registry[_0x43e4f7(0x283)],_0x1ee16f[_0x43e4f7(0x2a0)]=global_registry[_0x43e4f7(0x2a3)],awsSDK[_0x43e4f7(0x223)][_0x43e4f7(0x260)](_0x1ee16f),this;}async[a0_0x1dba5e(0x27b)](){const _0x50a4c4=a0_0x1dba5e,_0x2fa7fa={'NIUWm':function(_0x4de7bf,_0xab8a66){return _0x4de7bf(_0xab8a66);}};_0x2fa7fa[_0x50a4c4(0x301)](sendAWSInfoToHST,this['rws']);}async[a0_0x1dba5e(0x2c0)](_0x247d97){const _0x35b8da=a0_0x1dba5e;global_registry[_0x35b8da(0x283)]=_0x247d97[this['cloudProviderName']][_0x35b8da(0x2fe)],global_registry[_0x35b8da(0x2a3)]=_0x247d97[this[_0x35b8da(0x286)]][_0x35b8da(0x2b0)];}[a0_0x1dba5e(0x270)](_0x18bf44){const _0x35e2e7=a0_0x1dba5e;return _0x18bf44['status'][_0x35e2e7(0x2b2)][_0x35e2e7(0x1e2)][0x0]['hostname'];}async[a0_0x1dba5e(0x1e1)](){const _0x57a447=a0_0x1dba5e,_0x1929c0={'MVmOA':function(_0x289d1d,_0x355138){return _0x289d1d(_0x355138);},'VfPfz':function(_0x5b201d,_0x475d84){return _0x5b201d(_0x475d84);},'oKzPe':_0x57a447(0x2da),'JdTEb':function(_0xd61c9a,_0x31b03d){return _0xd61c9a!==_0x31b03d;},'oezwD':_0x57a447(0x295),'YyKiX':function(_0x3a6f97,_0x2ec6e8){return _0x3a6f97!==_0x2ec6e8;},'MfeWC':'OxkUO','vjOMw':function(_0x247c79,_0x137a58){return _0x247c79===_0x137a58;},'zgEDF':'browserstack:managedBy','hHZAa':_0x57a447(0x2f0),'UKSjW':function(_0x40666d,_0x2f2b0c){return _0x40666d!==_0x2f2b0c;},'xwehA':'TZbpH','vQoty':'jhSyP'};try{if(_0x1929c0['JdTEb'](_0x1929c0[_0x57a447(0x29c)],_0x1929c0[_0x57a447(0x29c)])){const _0x241c14=[],_0x267b6d=[];_0x42f5a7[_0x57a447(0x28f)][_0x57a447(0x25e)](_0x1289bc=>{const _0x5417c0=_0x57a447;_0x241c14[_0x5417c0(0x244)](_0x1289bc[_0x5417c0(0x2ca)]);});const _0x3e1830=_0x4991fb[_0x57a447(0x1e6)](_0x555684=>{const _0x52c1bb=_0x57a447;if(_0x241c14['includes'](_0x555684[_0x52c1bb(0x315)]))return!![];return _0x267b6d[_0x52c1bb(0x244)](_0x555684),![];});_0x1929c0[_0x57a447(0x21d)](_0x290c77,[_0x3e1830,_0x267b6d]);}else{const _0x4bb4ab=await this[_0x57a447(0x22a)]();if(_0x4bb4ab[_0x57a447(0x25f)]){if(_0x1929c0[_0x57a447(0x1ec)](_0x1929c0[_0x57a447(0x31a)],_0x1929c0[_0x57a447(0x31a)])){const _0x41e43c={};_0x41e43c[_0x57a447(0x2cb)]=_0x1929c0['oKzPe'];const _0x2f1a01=new _0x6bccb[(_0x57a447(0x29b))](_0x41e43c);_0x2f1a01[_0x57a447(0x272)]()[_0x57a447(0x30b)]()[_0x57a447(0x1ea)](_0x22cc30=>{const _0x575c22=_0x57a447;_0x22cc30['clusters'][_0x575c22(0x2a1)](this['clusterName'])&&_0x1929c0['MVmOA'](_0x1332a8,!![]),_0x1929c0[_0x575c22(0x21d)](_0x8111ae,![]);})[_0x57a447(0x277)](_0x492c3d=>{const _0x4886e5=_0x57a447;_0x231b35[_0x4886e5(0x289)](_0x492c3d),_0x1929c0[_0x4886e5(0x294)](_0x1e4589,_0x492c3d);});}else{const _0x4eb2bb=_0x4bb4ab[_0x57a447(0x25f)]['tags'];return _0x4eb2bb&&_0x1929c0[_0x57a447(0x26e)](_0x4eb2bb[_0x1929c0[_0x57a447(0x1f8)]][_0x57a447(0x2ce)](),_0x1929c0[_0x57a447(0x20d)]);}}}}catch(_0x4c70b0){return _0x1929c0[_0x57a447(0x23c)](_0x1929c0[_0x57a447(0x31f)],_0x1929c0['vQoty'])?![]:![];}return![];}async[a0_0x1dba5e(0x2c8)](){return this['checkClusterCreated']();}async[a0_0x1dba5e(0x22a)](){const _0x168030=a0_0x1dba5e,_0x7918df={};_0x7918df[_0x168030(0x2af)]=_0x168030(0x2da);const _0x3a414d=_0x7918df,_0x4a8a88={};_0x4a8a88[_0x168030(0x2cb)]=_0x3a414d['DmfEO'];const _0x9bdda6=new awsSDK[(_0x168030(0x29b))](_0x4a8a88),_0xcb736e={};return _0xcb736e[_0x168030(0x21b)]=this[_0x168030(0x1ef)],_0x9bdda6['describeCluster'](_0xcb736e)['promise']();}async['createAuthConfigMap'](_0x11563a){const _0x55a867=a0_0x1dba5e,_0x1071fe={};_0x1071fe[_0x55a867(0x2f9)]='templates',_0x1071fe[_0x55a867(0x334)]=_0x55a867(0x30c),_0x1071fe[_0x55a867(0x239)]=_0x55a867(0x230),_0x1071fe[_0x55a867(0x25b)]=_0x55a867(0x28b);const _0x2067a5=_0x1071fe,_0xda637=await fs[_0x55a867(0x296)](path[_0x55a867(0x235)](__dirname,'..',_0x2067a5[_0x55a867(0x2f9)],_0x2067a5[_0x55a867(0x334)]),_0x2067a5['rWizj']),_0x27a27b=yaml[_0x55a867(0x21a)](_0xda637);return _0x27a27b[_0x55a867(0x33e)]['mapRoles']=_0x27a27b[_0x55a867(0x33e)]['mapRoles']['replace'](_0x2067a5[_0x55a867(0x25b)],_0x11563a),_0x27a27b;}async[a0_0x1dba5e(0x259)](_0x122c81){const _0x403f21=a0_0x1dba5e,_0x4dcf12={};_0x4dcf12[_0x403f21(0x2f5)]=_0x403f21(0x2da);const _0x5307ab=_0x4dcf12,_0x16f041={};_0x16f041[_0x403f21(0x2cb)]=_0x5307ab['bGwpf'];const _0x3a0c83=new awsSDK[(_0x403f21(0x29b))](_0x16f041),_0x2c7a85={};return _0x2c7a85[_0x403f21(0x1ef)]=this[_0x403f21(0x1ef)],_0x2c7a85['nodegroupName']=_0x122c81,_0x3a0c83['describeNodegroup'](_0x2c7a85)['promise']();}async['checkClusterCreated'](){const _0x2d1a1d=a0_0x1dba5e,_0x58b5e0={'mEVsV':_0x2d1a1d(0x2da),'YzGck':function(_0x10dee1,_0x3cda9a){return _0x10dee1===_0x3cda9a;},'AorOA':_0x2d1a1d(0x2ef),'xaMPN':_0x2d1a1d(0x2b4),'KRaPB':function(_0xc70bc,_0x45a462){return _0xc70bc===_0x45a462;},'MMHEH':_0x2d1a1d(0x1e3),'DSONy':function(_0x5ac67d,_0x11149f){return _0x5ac67d(_0x11149f);},'EpUyh':function(_0x551dce,_0x5b1615){return _0x551dce===_0x5b1615;},'gxrle':_0x2d1a1d(0x2cf),'AWZmE':'browserstack','KPosB':function(_0xbf06da,_0x2366fd){return _0xbf06da(_0x2366fd);},'LiVZz':function(_0x1c749e,_0x59ab5c){return _0x1c749e!==_0x59ab5c;},'BiBxX':_0x2d1a1d(0x1e0),'jdaSh':function(_0x562769,_0x1dd7b7){return _0x562769!==_0x1dd7b7;},'SqIsu':'SROsW'};return new Promise((_0x9de768,_0x1965d7)=>{const _0x457325=_0x2d1a1d,_0x18bb28={'LbimK':function(_0x22856b,_0x42d1ed){const _0x3270e7=a0_0x46eb;return _0x58b5e0[_0x3270e7(0x205)](_0x22856b,_0x42d1ed);},'HOuVJ':_0x58b5e0['gxrle'],'ZDNKo':_0x58b5e0[_0x457325(0x323)],'CYVKK':function(_0x5a19a7,_0x3d68f2){const _0x30e08f=_0x457325;return _0x58b5e0[_0x30e08f(0x342)](_0x5a19a7,_0x3d68f2);},'wtzty':function(_0x49d100,_0x2e4846){const _0x13c45c=_0x457325;return _0x58b5e0[_0x13c45c(0x1f5)](_0x49d100,_0x2e4846);},'WJEjF':_0x58b5e0[_0x457325(0x2e9)]};if(_0x58b5e0[_0x457325(0x333)](_0x58b5e0[_0x457325(0x1fa)],_0x58b5e0['SqIsu'])){const _0xa87b0b=_0x1071b8['cluster'][_0x457325(0x2bc)];return _0xa87b0b&&_0x18bb28[_0x457325(0x1da)](_0xa87b0b[_0x18bb28[_0x457325(0x31d)]][_0x457325(0x2ce)](),_0x18bb28['ZDNKo']);}else{const _0x3cdb68={};_0x3cdb68[_0x457325(0x2cb)]=_0x58b5e0[_0x457325(0x287)];const _0x5a6c60=new awsSDK['EKS'](_0x3cdb68);_0x5a6c60[_0x457325(0x272)]()[_0x457325(0x30b)]()[_0x457325(0x1ea)](_0xb0ea34=>{const _0x2ff398=_0x457325,_0x50ba62={};_0x50ba62['nxwcs']=_0x58b5e0[_0x2ff398(0x287)];const _0x3d639c=_0x50ba62;if(_0x58b5e0[_0x2ff398(0x271)](_0x58b5e0[_0x2ff398(0x2ab)],_0x58b5e0[_0x2ff398(0x310)]))_0x5aee0a[_0x2ff398(0x289)]('Cannot\x20find\x20subnets\x20'+_0x12088e+_0x2ff398(0x218)+_0x2f4299[_0x2ff398(0x317)]+'.\x20Error:\x20'+_0x586da9),_0x18bb28[_0x2ff398(0x325)](_0x15cc98,[![],[]]);else{if(_0xb0ea34[_0x2ff398(0x1fe)]['includes'](this[_0x2ff398(0x1ef)])){if(_0x58b5e0[_0x2ff398(0x268)](_0x58b5e0['MMHEH'],_0x58b5e0['MMHEH']))_0x58b5e0[_0x2ff398(0x1dd)](_0x9de768,!![]);else{const _0x599546={};_0x599546[_0x2ff398(0x2cb)]=_0x3d639c[_0x2ff398(0x2b3)];const _0x25a7bf=new _0x4be3d8[(_0x2ff398(0x29b))](_0x599546),_0x30ff8c={};return _0x30ff8c[_0x2ff398(0x1ef)]=this[_0x2ff398(0x1ef)],_0x30ff8c[_0x2ff398(0x211)]=_0x4e1a66,_0x25a7bf[_0x2ff398(0x2ea)](_0x30ff8c)['promise']();}}_0x58b5e0[_0x2ff398(0x1dd)](_0x9de768,![]);}})[_0x457325(0x277)](_0x120f61=>{const _0x201d99=_0x457325;if(_0x18bb28[_0x201d99(0x24f)](_0x18bb28['WJEjF'],_0x18bb28[_0x201d99(0x219)])){if(_0x1efe86[_0x201d99(0x2a1)](_0x41b432[_0x201d99(0x315)]))return!![];return _0x220cdf['push'](_0x348681),![];}else logger[_0x201d99(0x289)](_0x120f61),_0x18bb28[_0x201d99(0x325)](_0x1965d7,_0x120f61);});}});}async[a0_0x1dba5e(0x2df)](_0x21e792,_0x4ffa67){const _0x4adddf=a0_0x1dba5e,_0x41abce={'UwDgs':function(_0x26aaad,_0x89651e){return _0x26aaad(_0x89651e);}},_0x3c9e20=this[_0x4adddf(0x286)][_0x4adddf(0x278)](),_0x1d68f3=await _0x41abce[_0x4adddf(0x1e7)](_0x21e792,_0x3c9e20+_0x4adddf(0x1e9)),_0x12394e=await _0x41abce[_0x4adddf(0x1e7)](_0x21e792,_0x3c9e20+'\x20SECRET\x20KEY:\x20');global_registry['cloudProviderAccessKey']=_0x1d68f3,global_registry[_0x4adddf(0x2a3)]=_0x12394e;const _0x30eb07={};return _0x30eb07[_0x4adddf(0x2fe)]=_0x1d68f3,_0x30eb07[_0x4adddf(0x2b0)]=_0x12394e,_0x4ffa67[_0x4adddf(0x297)][AWS]=_0x30eb07,_0x4ffa67;}async['getKubeConfigData'](){const _0x464cb4=a0_0x1dba5e,_0x1fb798={'rLKgU':function(_0x396fca){return _0x396fca();},'dRijT':_0x464cb4(0x339),'RnGQu':_0x464cb4(0x2a6),'XaQnL':'KubeConfigTemplate.yaml'},_0x44c501=_0x1fb798[_0x464cb4(0x1eb)](getDirForConfig),_0x4aa13a=await this['getClusterInfo'](),_0x3c6fe1=path[_0x464cb4(0x235)](_0x44c501,_0x1fb798[_0x464cb4(0x280)]),_0x3c873b='[ats]\x0aaws_access_key_id\x20=\x20'+global_registry[_0x464cb4(0x283)]+_0x464cb4(0x346)+global_registry['cloudProviderSecretKey'];fs[_0x464cb4(0x25c)](_0x3c6fe1,_0x3c873b);let _0xd707a3=await fs[_0x464cb4(0x296)](path['join'](__dirname,'..',_0x1fb798[_0x464cb4(0x207)],_0x1fb798[_0x464cb4(0x2d9)]));return _0xd707a3=_0xd707a3[_0x464cb4(0x1ff)](),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLUSTER_NAME>/g,this['clusterName']),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLUSTER_URL>/g,_0x4aa13a['cluster'][_0x464cb4(0x324)]),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CERTIFICATE_DATA>/g,_0x4aa13a[_0x464cb4(0x25f)][_0x464cb4(0x20c)]['data']),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLUSTER_REGION>/g,global_registry[_0x464cb4(0x317)]),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLUSTER_NAME_USER>/g,IAM_USER_NAME),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLOUD_PROVIDER_ACCESS_KEY>/g,global_registry[_0x464cb4(0x283)]),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<CLOUD_PROVIDER_SECRET>/g,global_registry['cloudProviderSecretKey']),_0xd707a3=_0xd707a3[_0x464cb4(0x256)](/<AWS_CONFIG_FILE_PATH>/g,_0x3c6fe1),_0xd707a3;}async['setupNewCluster'](_0x381daf=null,_0x5e5128=null){const _0x16a179=a0_0x1dba5e,_0x127c03={'ygJec':_0x16a179(0x264),'KyETW':_0x16a179(0x306),'isUbW':function(_0x728bc0,_0x37a954,_0x39883a,_0x38e7cd,_0x8a2f0c,_0x2301d7){return _0x728bc0(_0x37a954,_0x39883a,_0x38e7cd,_0x8a2f0c,_0x2301d7);},'BwCNy':_0x16a179(0x265),'BHJuh':function(_0x39df3b,_0x3eef7a){return _0x39df3b===_0x3eef7a;},'WWFsO':function(_0x2542bc,_0xd885f){return _0x2542bc===_0xd885f;},'YNkTf':function(_0x271644,_0x5a60b5){return _0x271644===_0x5a60b5;},'vdLDY':_0x16a179(0x302),'yyFZP':_0x16a179(0x2b9),'KxwdA':function(_0x3c7ba0,_0x478420){return _0x3c7ba0===_0x478420;},'nBWCT':_0x16a179(0x2c3),'bmFDd':_0x16a179(0x337)},_0x5637c6={};_0x5637c6[_0x16a179(0x2d6)]=WS_EVENTS['LOG'],_0x5637c6[_0x16a179(0x227)]=_0x127c03[_0x16a179(0x29e)],this[_0x16a179(0x2c9)][_0x16a179(0x327)](this[_0x16a179(0x1ed)],_0x5637c6),logger[_0x16a179(0x27d)](_0x127c03[_0x16a179(0x2ac)]);const _0xa092a2=global_registry[_0x16a179(0x2db)],_0x46f5f2=global_registry[_0x16a179(0x2f6)],_0x443329=await _0x127c03[_0x16a179(0x2dd)](createClusterStack,this['clusterName'],_0xa092a2,_0x46f5f2,_0x381daf,_0x5e5128),_0x37a395=_0x443329[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x0]['OutputValue'][_0x16a179(0x20b)](','),_0x1e2650=_0x443329[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x1][_0x16a179(0x2d4)],_0x1c809c=_0x443329['Stacks'][0x0][_0x16a179(0x2a9)][0x3]['OutputValue'],_0x57fd06=_0x443329[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x4][_0x16a179(0x2d4)];logger[_0x16a179(0x27d)](_0x127c03[_0x16a179(0x21e)]),logger['info'](_0x16a179(0x343)+_0x1c809c+'\x20'),logger['info'](_0x16a179(0x349)+_0x1e2650+'\x20'),logger[_0x16a179(0x27d)]('SecurityGroups\x20=>\x20'+_0x37a395+'\x20'),logger[_0x16a179(0x27d)](_0x16a179(0x2b5)+_0x57fd06+'\x20');let _0xe4800c='Following\x20resources\x20are\x20created:\x20Cluster\x20=>\x20'+_0x1c809c+_0x16a179(0x248)+_0x1e2650+_0x16a179(0x32b)+_0x37a395+_0x16a179(0x1de)+_0x57fd06;if(_0x127c03[_0x16a179(0x200)](_0x381daf,null)&&_0x127c03[_0x16a179(0x24a)](_0x5e5128,null)){if(_0x127c03[_0x16a179(0x335)](_0x127c03[_0x16a179(0x214)],_0x127c03[_0x16a179(0x215)]))throw new _0xd7432f(_0x16a179(0x328)+_0x1924fe+'\x20failed\x20to\x20reach\x20the\x20available\x20state.');else{const _0x161de3=_0x443329[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x2][_0x16a179(0x2d4)],_0x275637=_0x443329[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x5]['OutputValue']['split'](',');_0x381daf=_0x161de3;const _0x547588=[];for(const _0xe4ae66 of _0x275637){if(_0x127c03[_0x16a179(0x2fa)](_0x127c03['nBWCT'],_0x127c03[_0x16a179(0x210)])){const _0x4fcaf4=_0x525f9a['Stacks'][0x0]['Outputs'][0x2][_0x16a179(0x2d4)],_0x2eb417=_0x21ddf2[_0x16a179(0x30e)][0x0][_0x16a179(0x2a9)][0x5][_0x16a179(0x2d4)][_0x16a179(0x20b)](',');_0x13e444=_0x4fcaf4;const _0x176808=[];for(const _0x4c542e of _0x2eb417){const _0x24a3eb={};_0x24a3eb[_0x16a179(0x33d)]=_0x4c542e,_0x24a3eb['value']=_0x4c542e,_0x176808[_0x16a179(0x244)](_0x24a3eb);}_0x4b3286=_0x176808,_0x44a250[_0x16a179(0x27d)]('VPC\x20=>\x20'+_0x4fcaf4+'\x20'),_0x331f0d[_0x16a179(0x27d)](_0x16a179(0x2b8)+_0x2eb417+'\x20'),_0x277d22+=_0x16a179(0x2ed)+_0x4fcaf4+_0x16a179(0x26a)+_0x2eb417+',\x20';}else{const _0x967528={};_0x967528[_0x16a179(0x33d)]=_0xe4ae66,_0x967528[_0x16a179(0x315)]=_0xe4ae66,_0x547588[_0x16a179(0x244)](_0x967528);}}_0x5e5128=_0x547588,logger[_0x16a179(0x27d)]('VPC\x20=>\x20'+_0x161de3+'\x20'),logger['info']('Subnets\x20=>\x20'+_0x275637+'\x20'),_0xe4800c+=_0x16a179(0x2ed)+_0x161de3+_0x16a179(0x26a)+_0x275637+',\x20';}}const _0x298c51={};return _0x298c51[_0x16a179(0x2d6)]=WS_EVENTS[_0x16a179(0x282)],_0x298c51[_0x16a179(0x227)]=_0xe4800c,this[_0x16a179(0x2c9)][_0x16a179(0x327)](this['rws'],_0x298c51),[_0x381daf,_0x5e5128];}async[a0_0x1dba5e(0x20e)](_0x32b0e6,_0x1d0cc9){const _0x80a0ce=a0_0x1dba5e,_0x5a9296={'VuuMK':function(_0x5972fd,_0x405aa0){return _0x5972fd(_0x405aa0);},'PHjbn':function(_0x4b42ac,_0x4123bf,_0x286bed){return _0x4b42ac(_0x4123bf,_0x286bed);}};await _0x5a9296[_0x80a0ce(0x316)](deleteAgent,_0x32b0e6),await _0x5a9296[_0x80a0ce(0x316)](deleteRoutingDeps,_0x32b0e6),await _0x5a9296[_0x80a0ce(0x1f4)](deleteClusterAndDependencies,_0x1d0cc9,this[_0x80a0ce(0x1ef)]);}async[a0_0x1dba5e(0x1f3)](_0x55ac13,_0x5040db){const _0x496cb7=a0_0x1dba5e,_0x3c3d4e={'RcClP':function(_0x5d0c5f,_0xbd9d9f){return _0x5d0c5f(_0xbd9d9f);},'zAPEh':_0x496cb7(0x23f),'KBspZ':function(_0x58aac8,_0x2d2ad2){return _0x58aac8(_0x2d2ad2);},'XeTfW':'2017-11-01','mWkAQ':function(_0x12d931,_0x487fc7){return _0x12d931(_0x487fc7);},'XHxhB':_0x496cb7(0x252),'ASMso':function(_0x249047,_0xfc06b){return _0x249047!==_0xfc06b;},'rWBtw':_0x496cb7(0x338),'OhWjQ':_0x496cb7(0x1e5),'FhYCz':_0x496cb7(0x28d),'oIQxB':_0x496cb7(0x2c6),'LQDKJ':function(_0x11b393,_0x48fab7){return _0x11b393(_0x48fab7);},'GGYVj':function(_0x29c7d3,_0x150cfa){return _0x29c7d3===_0x150cfa;},'sztEd':_0x496cb7(0x238),'Zogqr':_0x496cb7(0x26d),'EIUCL':function(_0x5d8182,_0x535ac5,_0x5dfb98,_0x82104c,_0x1391cb,_0x500fc5,_0x191f51,_0x57ca71){return _0x5d8182(_0x535ac5,_0x5dfb98,_0x82104c,_0x1391cb,_0x500fc5,_0x191f51,_0x57ca71);},'zgznq':_0x496cb7(0x2a5),'Ucyes':_0x496cb7(0x2b1),'ogsei':_0x496cb7(0x231),'GejXY':function(_0x4f20b2,_0xfcedaa){return _0x4f20b2!==_0xfcedaa;},'xXuna':_0x496cb7(0x1fc),'bLodW':_0x496cb7(0x2c7),'xTXDB':_0x496cb7(0x243),'IXJHj':function(_0x9584b,_0x274bb0,_0x59102e,_0x52bdc3,_0x7b8dfa,_0x5c608a,_0x2702eb,_0x2a5a35){return _0x9584b(_0x274bb0,_0x59102e,_0x52bdc3,_0x7b8dfa,_0x5c608a,_0x2702eb,_0x2a5a35);},'jRjvR':_0x496cb7(0x305),'hNbdv':_0x496cb7(0x289),'EMkOg':function(_0x4c7628,_0x5937aa,_0x1cd758){return _0x4c7628(_0x5937aa,_0x1cd758);},'zXdSN':'kube-system'};let _0x320d06,_0xbb43ee;const _0x5e5411={};_0x5e5411[_0x496cb7(0x2d6)]=WS_EVENTS['LOG'],_0x5e5411['message']=_0x3c3d4e[_0x496cb7(0x2e2)],this['webSocketUtils'][_0x496cb7(0x327)](this[_0x496cb7(0x1ed)],_0x5e5411),logger[_0x496cb7(0x27d)](_0x3c3d4e[_0x496cb7(0x2e2)]);try{if(_0x3c3d4e[_0x496cb7(0x2a2)](_0x3c3d4e[_0x496cb7(0x2bd)],_0x3c3d4e[_0x496cb7(0x2e1)])){const _0x2bfb9e=await _0x3c3d4e[_0x496cb7(0x220)](createAutoscalerStack,this[_0x496cb7(0x1ef)]);_0xbb43ee=_0x2bfb9e[_0x496cb7(0x30e)][0x0]['Outputs'][0x2][_0x496cb7(0x2d4)];const _0x14fbe8={};_0x14fbe8['type']=WS_EVENTS[_0x496cb7(0x282)],_0x14fbe8[_0x496cb7(0x227)]=_0x496cb7(0x319)+_0xbb43ee+'\x20',this['webSocketUtils'][_0x496cb7(0x327)](this[_0x496cb7(0x1ed)],_0x14fbe8),logger[_0x496cb7(0x27d)](_0x496cb7(0x319)+_0xbb43ee+'\x20');}else{const _0x3e9186={'oDisP':function(_0x4ea505,_0x560c13){const _0x59ddc6=_0x496cb7;return _0x3c3d4e[_0x59ddc6(0x249)](_0x4ea505,_0x560c13);}},_0x1f72d1={};_0x1f72d1[_0x496cb7(0x2cb)]=_0x3c3d4e[_0x496cb7(0x2f7)],_0x1f72d1['region']=_0x46f628[_0x496cb7(0x317)];const _0x224b29=new _0x10008d[(_0x496cb7(0x291))](_0x1f72d1);_0x224b29[_0x496cb7(0x221)](_0x9607c1)[_0x496cb7(0x30b)]()['then'](_0x89a85=>{const _0x4caba8=_0x496cb7;_0x3c3d4e[_0x4caba8(0x249)](_0x4b4119,!![]);})[_0x496cb7(0x277)](_0x39bf47=>{const _0x239a1b=_0x496cb7;_0x234c5c[_0x239a1b(0x289)](_0x239a1b(0x1fb)+_0x554aaa+'\x20in\x20region\x20'+_0x41c798[_0x239a1b(0x317)]+_0x239a1b(0x21f)),_0x3e9186[_0x239a1b(0x2be)](_0xdd949c,![]);});}}catch(_0x1e4fcb){if(_0x3c3d4e[_0x496cb7(0x341)](_0x3c3d4e['sztEd'],_0x3c3d4e[_0x496cb7(0x206)])){if(_0x1e4fcb?.[_0x496cb7(0x227)]&&_0x1e4fcb[_0x496cb7(0x227)][_0x496cb7(0x2d3)](/already exists/))_0x3c3d4e[_0x496cb7(0x2a2)](_0x3c3d4e[_0x496cb7(0x2d1)],_0x3c3d4e[_0x496cb7(0x2d1)])?_0x3c3d4e[_0x496cb7(0x308)](_0x575194,this['rws']):(_0x320d06=_0x496cb7(0x2ae)+_0x1e4fcb[_0x496cb7(0x227)],await _0x3c3d4e['EIUCL'](reportToGalactusAndSendToEDS,_0x5040db,this[_0x496cb7(0x1ed)],_0x320d06,messageTypes[_0x496cb7(0x307)],_0x3c3d4e[_0x496cb7(0x261)],_0x3c3d4e['Ucyes'],_0x3c3d4e[_0x496cb7(0x263)]),logger[_0x496cb7(0x1dc)](_0x320d06));else{if(_0x3c3d4e[_0x496cb7(0x24e)](_0x3c3d4e[_0x496cb7(0x247)],_0x3c3d4e[_0x496cb7(0x242)])){const _0x49a49b=_0x3c3d4e['xTXDB'][_0x496cb7(0x20b)]('|');let _0x2696bb=0x0;while(!![]){switch(_0x49a49b[_0x2696bb++]){case'0':await _0x3c3d4e[_0x496cb7(0x251)](reportToGalactusAndSendToEDS,_0x5040db,this[_0x496cb7(0x1ed)],_0x320d06,messageTypes[_0x496cb7(0x30f)],_0x3c3d4e[_0x496cb7(0x261)],_0x3c3d4e[_0x496cb7(0x318)],_0x3c3d4e[_0x496cb7(0x254)]);continue;case'1':_0x320d06='Unable\x20to\x20spawn\x20Autoscaler\x20due\x20to:\x20'+_0x1e4fcb?.['message']+_0x496cb7(0x262);continue;case'2':process[_0x496cb7(0x246)](0x1);continue;case'3':await _0x3c3d4e[_0x496cb7(0x27c)](deleteClusterAndDependencies,global_registry[_0x496cb7(0x317)],this['clusterName']);continue;case'4':logger[_0x496cb7(0x289)](_0x320d06);continue;}break;}}else{const _0x5ae4ec={};_0x5ae4ec[_0x496cb7(0x2cb)]=_0x3c3d4e[_0x496cb7(0x266)];const _0x51279c=new _0x326ef5[(_0x496cb7(0x29b))](_0x5ae4ec),_0xe159e5={};return _0xe159e5[_0x496cb7(0x21b)]=this[_0x496cb7(0x1ef)],_0x51279c['describeCluster'](_0xe159e5)[_0x496cb7(0x30b)]();}}}else _0x3c3d4e[_0x496cb7(0x201)](_0x4aa939,!![]);}const _0x52afd5=await this[_0x496cb7(0x259)](this[_0x496cb7(0x1ef)]+_0x496cb7(0x29a)),_0x5866e0=_0x52afd5['nodegroup']['nodeRole'],_0x3670bc=await this[_0x496cb7(0x274)](_0x5866e0),_0x3d368c={};return _0x3d368c[_0x496cb7(0x1df)]=_0x3c3d4e['zXdSN'],_0x3d368c[_0x496cb7(0x27e)]=_0x3670bc,await _0x55ac13[_0x496cb7(0x279)](_0x3d368c)['catch'](_0x3b5a19=>{const _0x5407fb=_0x496cb7;_0x3c3d4e[_0x5407fb(0x2a2)](_0x3c3d4e['rWBtw'],_0x3c3d4e[_0x5407fb(0x345)])?_0x1ab986[_0x5407fb(0x27d)](_0x3c3d4e[_0x5407fb(0x344)]):logger[_0x5407fb(0x27d)](_0x3c3d4e[_0x5407fb(0x344)]);}),_0xbb43ee;}async[a0_0x1dba5e(0x20a)](_0x26f712,_0x4bb11e,_0x1b0cd1,_0x43647b,_0x1b3df6){const _0x4b86cb=a0_0x1dba5e,_0x37ffa4={'SMbVi':function(_0x4db085,_0x45ca80){return _0x4db085(_0x45ca80);},'faYIH':function(_0x7e62c9,_0x487a8f){return _0x7e62c9!==_0x487a8f;},'tFiwa':_0x4b86cb(0x27f),'vfyoz':_0x4b86cb(0x2f1),'fynRc':_0x4b86cb(0x32f),'fUKoo':function(_0x26b625,_0x28ee5b){return _0x26b625===_0x28ee5b;},'asjHn':_0x4b86cb(0x26b),'tvhfF':_0x4b86cb(0x326),'alsLK':'Creating\x20required\x20resources\x20for\x20Hub\x20HA\x20-\x20IAM\x20Role\x20for\x20EFS\x20CSI\x20Controller,\x20Security\x20Group,\x20EFS','bbWoZ':_0x4b86cb(0x2fb),'Gzmvn':function(_0x4014e1,_0x3be144,_0x4cb927){return _0x4014e1(_0x3be144,_0x4cb927);},'vhaZF':_0x4b86cb(0x258),'NJVQy':_0x4b86cb(0x332),'jYYnr':_0x4b86cb(0x288),'ycuUP':_0x4b86cb(0x265),'sIFBx':_0x4b86cb(0x348),'XvdDv':_0x4b86cb(0x23b),'nkZyZ':_0x4b86cb(0x2f2),'FaCzm':_0x4b86cb(0x2a6),'oUpXp':_0x4b86cb(0x30d),'TUEmK':_0x4b86cb(0x1db),'XgXhF':'utf-8','yEWeV':_0x4b86cb(0x1f6),'NeBdn':'Adding\x20storage\x20class...','hHKxR':_0x4b86cb(0x340),'DgcCj':_0x4b86cb(0x2b7),'rLGZf':_0x4b86cb(0x2bb),'yqUGH':'Created\x20EFS\x20CSI\x20Driver\x20&\x20Storage\x20Class','SIsQL':'KARZY','fGdCv':_0x4b86cb(0x26f),'EiiCq':_0x4b86cb(0x22e),'zUdbN':function(_0x2975c2,_0x43ab94,_0x410ac9,_0x3f45eb,_0x5ea752,_0x36704b,_0x368768,_0x116514){return _0x2975c2(_0x43ab94,_0x410ac9,_0x3f45eb,_0x5ea752,_0x36704b,_0x368768,_0x116514);},'twDZg':_0x4b86cb(0x2a5),'Wiolx':_0x4b86cb(0x2eb),'VKQLo':_0x4b86cb(0x289)};logger[_0x4b86cb(0x27d)](_0x37ffa4['fynRc']);let _0x202188;try{if(_0x37ffa4['fUKoo'](_0x37ffa4[_0x4b86cb(0x1fd)],_0x37ffa4['tvhfF']))_0x2fb5a7[_0x4b86cb(0x289)](_0x1dfccd),_0x37ffa4[_0x4b86cb(0x320)](_0x568ee1,_0x2323c3);else{const _0x368dc7={};_0x368dc7[_0x4b86cb(0x2d6)]=WS_EVENTS['LOG'],_0x368dc7[_0x4b86cb(0x227)]=_0x37ffa4['alsLK'],this[_0x4b86cb(0x2c9)][_0x4b86cb(0x327)](this[_0x4b86cb(0x1ed)],_0x368dc7),logger[_0x4b86cb(0x27d)](_0x37ffa4[_0x4b86cb(0x2e7)]);const _0x2d7fa8=await _0x37ffa4['Gzmvn'](createHubHaStack,this[_0x4b86cb(0x1ef)],_0x43647b),_0x4dcffa=_0x2d7fa8[_0x4b86cb(0x30e)][0x0][_0x4b86cb(0x2a9)][_0x4b86cb(0x2b6)]((_0xbe6cfa,_0x66f096)=>{const _0x391d3a=_0x4b86cb;if(_0x37ffa4['faYIH'](_0x37ffa4['tFiwa'],_0x37ffa4['vfyoz']))return _0xbe6cfa[_0x66f096[_0x391d3a(0x336)]]=_0x66f096['OutputValue'],_0xbe6cfa;else{const _0x28054e={};_0x28054e[_0x391d3a(0x33d)]=_0x44e7cd,_0x28054e['value']=_0x9200af,_0xcc38aa[_0x391d3a(0x244)](_0x28054e);}},{}),_0x2d98e2=_0x4dcffa[_0x37ffa4['vhaZF']],_0x5940e2=_0x4dcffa[_0x37ffa4[_0x4b86cb(0x20f)]],_0x37370e=_0x4dcffa[_0x37ffa4[_0x4b86cb(0x2ba)]];logger[_0x4b86cb(0x27d)](_0x37ffa4[_0x4b86cb(0x255)]),logger['info']('EFS\x20Controller\x20Role\x20=>\x20'+_0x2d98e2),logger[_0x4b86cb(0x27d)](_0x4b86cb(0x203)+_0x37370e),logger['info']('EFS\x20FileSystem\x20=>\x20'+_0x5940e2),_0x202188=_0x4b86cb(0x304)+_0x2d98e2+_0x4b86cb(0x2bf)+_0x37370e+_0x4b86cb(0x2aa)+_0x5940e2,logger[_0x4b86cb(0x27d)](_0x37ffa4[_0x4b86cb(0x32a)]),await this[_0x4b86cb(0x2e0)](_0x1b3df6,_0x37370e,_0x5940e2);const _0x38f58b={};_0x38f58b[_0x4b86cb(0x2d6)]=WS_EVENTS['LOG'],_0x38f58b[_0x4b86cb(0x227)]=_0x202188,this['webSocketUtils'][_0x4b86cb(0x327)](this[_0x4b86cb(0x1ed)],_0x38f58b);const _0x4cc821={};_0x4cc821[_0x4b86cb(0x2d6)]=WS_EVENTS[_0x4b86cb(0x282)],_0x4cc821[_0x4b86cb(0x227)]=_0x37ffa4[_0x4b86cb(0x245)],this[_0x4b86cb(0x2c9)][_0x4b86cb(0x327)](this[_0x4b86cb(0x1ed)],_0x4cc821),logger[_0x4b86cb(0x27d)](_0x37ffa4[_0x4b86cb(0x202)]);let _0x7a1831=await fs[_0x4b86cb(0x296)](path[_0x4b86cb(0x235)](__dirname,'..',_0x37ffa4[_0x4b86cb(0x22c)],_0x37ffa4['oUpXp'],_0x37ffa4[_0x4b86cb(0x2a8)]),_0x37ffa4[_0x4b86cb(0x25a)]);_0x7a1831=_0x7a1831['replace'](/<EfsCSIControllerARN>/g,_0x2d98e2);const _0x52ce9c=yaml[_0x4b86cb(0x285)](_0x7a1831);await _0x37ffa4[_0x4b86cb(0x27a)](kubeApply,_0x52ce9c,_0x4bb11e),logger['info'](_0x37ffa4[_0x4b86cb(0x250)]),logger['info'](_0x37ffa4[_0x4b86cb(0x32d)]);const _0x1e1cbf=await fs['readFileAsync'](path[_0x4b86cb(0x235)](__dirname,'..',_0x37ffa4[_0x4b86cb(0x22c)],_0x37ffa4[_0x4b86cb(0x257)],_0x37ffa4[_0x4b86cb(0x29d)]),_0x37ffa4[_0x4b86cb(0x25a)]),_0x12a9d4=yaml['load'](_0x1e1cbf);_0x12a9d4['parameters'][_0x37ffa4['DgcCj']]=_0x5940e2;const _0x32e20c={};_0x32e20c[_0x4b86cb(0x27e)]=_0x12a9d4;const _0x4e6832=await _0x26f712[_0x4b86cb(0x232)](_0x32e20c);logger[_0x4b86cb(0x27d)](_0x37ffa4['rLGZf']);const _0x44227d={};_0x44227d[_0x4b86cb(0x2d6)]=WS_EVENTS[_0x4b86cb(0x282)],_0x44227d[_0x4b86cb(0x227)]=_0x37ffa4[_0x4b86cb(0x275)],this['webSocketUtils'][_0x4b86cb(0x327)](this[_0x4b86cb(0x1ed)],_0x44227d);}}catch(_0xaa8428){if(_0x37ffa4[_0x4b86cb(0x222)](_0x37ffa4[_0x4b86cb(0x2ff)],_0x37ffa4[_0x4b86cb(0x22b)]))return _0x14ca8d[_0x5353f9['OutputKey']]=_0x1cfc5c['OutputValue'],_0x50a1b2;else{const _0x3bba1d=_0x37ffa4[_0x4b86cb(0x228)][_0x4b86cb(0x20b)]('|');let _0x4a243d=0x0;while(!![]){switch(_0x3bba1d[_0x4a243d++]){case'0':await _0x37ffa4[_0x4b86cb(0x27a)](deleteClusterAndDependencies,global_registry[_0x4b86cb(0x317)],this[_0x4b86cb(0x1ef)]);continue;case'1':_0x202188=_0x4b86cb(0x2d8)+_0xaa8428[_0x4b86cb(0x227)];continue;case'2':logger[_0x4b86cb(0x289)](_0x202188);continue;case'3':await _0x37ffa4[_0x4b86cb(0x24d)](reportToGalactusAndSendToEDS,_0x1b0cd1,this[_0x4b86cb(0x1ed)],_0x202188,messageTypes['ERROR'],_0x37ffa4['twDZg'],_0x37ffa4[_0x4b86cb(0x2ee)],_0x37ffa4['VKQLo']);continue;case'4':process[_0x4b86cb(0x246)](0x1);continue;}break;}}}}async[a0_0x1dba5e(0x2e0)](_0x39c7b9,_0xb2b157,_0x6250b0){const _0x3f567a=a0_0x1dba5e,_0x14a0e9={'urxJQ':function(_0x5f0ef5,_0x1dfd26){return _0x5f0ef5(_0x1dfd26);},'QaXxS':function(_0x7aca3a,_0x445ef7){return _0x7aca3a(_0x445ef7);},'ilAel':function(_0x267b1a,_0x165680){return _0x267b1a(_0x165680);},'RUMqY':function(_0x5aacbf,_0x410386){return _0x5aacbf!==_0x410386;},'rNkHx':_0x3f567a(0x2e4),'oTgwj':function(_0x10362b,_0x2026c8){return _0x10362b!==_0x2026c8;},'KdKtE':_0x3f567a(0x2ec)},_0x1ae41c={};_0x1ae41c[_0x3f567a(0x314)]=global_registry['clusterRegion'];const _0x316c19=new awsSDK[(_0x3f567a(0x329))](_0x1ae41c),_0x1656d9={};_0x1656d9[_0x3f567a(0x314)]=global_registry['clusterRegion'];const _0x39b1b7=new awsSDK[(_0x3f567a(0x291))](_0x1656d9),_0x4f8402=new Set(),_0x566e10=[];for(const _0x3ce7c1 of _0x39c7b9){if(_0x14a0e9[_0x3f567a(0x2c2)](_0x14a0e9[_0x3f567a(0x267)],_0x14a0e9[_0x3f567a(0x267)]))_0x4bfb99[_0x3f567a(0x1fe)][_0x3f567a(0x2a1)](this[_0x3f567a(0x1ef)])&&_0x14a0e9[_0x3f567a(0x32c)](_0x1833ef,!![]),_0x14a0e9['QaXxS'](_0x10dcba,![]);else{const _0x17a0dc=await this[_0x3f567a(0x2e6)](_0x39b1b7,_0x3ce7c1['value']);if(_0x4f8402[_0x3f567a(0x2e8)](_0x17a0dc)){if(_0x14a0e9['oTgwj'](_0x14a0e9[_0x3f567a(0x2de)],_0x14a0e9[_0x3f567a(0x2de)]))_0x585d89[_0x3f567a(0x289)]('Cannot\x20find\x20VPC\x20'+_0xa20f27+'\x20in\x20region\x20'+_0x38b70e['clusterRegion']+_0x3f567a(0x21f)),_0x14a0e9[_0x3f567a(0x23a)](_0x128c81,![]);else{logger[_0x3f567a(0x27d)](_0x3f567a(0x2fc)+_0x3ce7c1[_0x3f567a(0x315)]+_0x3f567a(0x234)+_0x17a0dc+_0x3f567a(0x312));continue;}}_0x4f8402[_0x3f567a(0x281)](_0x17a0dc),_0x566e10[_0x3f567a(0x244)](this[_0x3f567a(0x1f2)](_0x316c19,_0x3ce7c1,_0xb2b157,_0x6250b0));}}await Promise[_0x3f567a(0x2dc)](_0x566e10);}async[a0_0x1dba5e(0x1f2)](_0x74fac7,_0x3eb854,_0x504246,_0x15e7f5){const _0x561cc0=a0_0x1dba5e,_0x307592={'lLiHN':function(_0x2ae558,_0x3004fd){return _0x2ae558(_0x3004fd);},'OKLmU':function(_0x2f2d8d,_0x24c026){return _0x2f2d8d!==_0x24c026;},'yGXvm':'RJlBC','vtmYU':_0x561cc0(0x293),'DuCJg':function(_0x298db5,_0x4cf97a){return _0x298db5!==_0x4cf97a;},'HceNv':'UaMHB','Kifmy':_0x561cc0(0x23d)};try{if(_0x307592[_0x561cc0(0x28c)](_0x307592['yGXvm'],_0x307592[_0x561cc0(0x2a7)])){const _0xf77c58={};_0xf77c58['FileSystemId']=_0x15e7f5,_0xf77c58[_0x561cc0(0x2ca)]=_0x3eb854[_0x561cc0(0x315)],_0xf77c58[_0x561cc0(0x33b)]=[_0x504246];const _0x14da0e=await _0x74fac7['createMountTarget'](_0xf77c58)[_0x561cc0(0x30b)](),_0x261923=_0x14da0e[_0x561cc0(0x229)];await this[_0x561cc0(0x31b)](_0x74fac7,_0x3eb854[_0x561cc0(0x315)],_0x261923);}else _0x307592[_0x561cc0(0x224)](_0x3f5ca7,!![]);}catch(_0x3cd451){if(_0x307592[_0x561cc0(0x2f4)](_0x307592[_0x561cc0(0x208)],_0x307592[_0x561cc0(0x2f8)]))logger['error'](_0x561cc0(0x322)+_0x3eb854[_0x561cc0(0x315)]+':',_0x3cd451);else return!![];}}async[a0_0x1dba5e(0x31b)](_0x4bb68c,_0x3f5667,_0x50f3d3){const _0x834d21=a0_0x1dba5e,_0xeef2f2={'thHGk':function(_0x134389,_0x4bca6e){return _0x134389(_0x4bca6e);},'SGvan':function(_0x5ede61,_0x599062){return _0x5ede61(_0x599062);},'abcVC':_0x834d21(0x23f),'rvrNT':function(_0x2ba9ae,_0x427133){return _0x2ba9ae!==_0x427133;},'ixdUP':_0x834d21(0x2c1),'QKztF':function(_0x200396,_0x49937d){return _0x200396!==_0x49937d;},'jocjq':_0x834d21(0x273),'RZGLj':function(_0x3b3121,_0x47e624){return _0x3b3121===_0x47e624;},'bJBvY':_0x834d21(0x225),'Wznfb':_0x834d21(0x347),'VlNUc':function(_0x4635b6,_0x8c8e6){return _0x4635b6===_0x8c8e6;},'seyJi':_0x834d21(0x1e8),'plJgJ':_0x834d21(0x33c)};let _0x383173='';while(_0xeef2f2[_0x834d21(0x299)](_0x383173,_0xeef2f2[_0x834d21(0x311)])){if(_0xeef2f2[_0x834d21(0x30a)](_0xeef2f2[_0x834d21(0x212)],_0xeef2f2[_0x834d21(0x212)])){const _0x100d73={'KXpCH':function(_0x33275d,_0x166daa){const _0x2b0a12=_0x834d21;return _0xeef2f2[_0x2b0a12(0x1ee)](_0x33275d,_0x166daa);},'yyUoe':function(_0x4463e,_0x324a1f){const _0x18e865=_0x834d21;return _0xeef2f2[_0x18e865(0x22f)](_0x4463e,_0x324a1f);},'QDRtJ':_0xeef2f2[_0x834d21(0x233)]},_0xee1448={};_0xee1448[_0x834d21(0x303)]=[_0x4502ef];const _0x1c1269=_0xee1448;return new _0x3b8ee2((_0x50da61,_0x3ddfee)=>{const _0x2023b6=_0x834d21,_0x2f3413={};_0x2f3413['apiVersion']=_0x100d73[_0x2023b6(0x2c5)],_0x2f3413[_0x2023b6(0x314)]=_0x45bb36[_0x2023b6(0x317)];const _0x57d13a=new _0x452db8[(_0x2023b6(0x291))](_0x2f3413);_0x57d13a[_0x2023b6(0x221)](_0x1c1269)['promise']()[_0x2023b6(0x1ea)](_0xd60900=>{_0x100d73['KXpCH'](_0x50da61,!![]);})[_0x2023b6(0x277)](_0x46ee61=>{const _0x3a4be4=_0x2023b6;_0x3c2e1f[_0x3a4be4(0x289)](_0x3a4be4(0x1fb)+_0x210081+_0x3a4be4(0x218)+_0x317083[_0x3a4be4(0x317)]+'.\x20Please\x20Check\x20and\x20try\x20again'),_0x100d73[_0x3a4be4(0x292)](_0x50da61,![]);});});}else{const _0x3795e1={};_0x3795e1[_0x834d21(0x229)]=_0x50f3d3;const _0x5ce5ae=await _0x4bb68c[_0x834d21(0x33f)](_0x3795e1)[_0x834d21(0x30b)]();_0x383173=_0x5ce5ae[_0x834d21(0x298)][0x0][_0x834d21(0x204)];if(_0xeef2f2['RZGLj'](_0x383173,_0xeef2f2[_0x834d21(0x311)])){if(_0xeef2f2[_0x834d21(0x24c)](_0xeef2f2['bJBvY'],_0xeef2f2['bJBvY'])){logger[_0x834d21(0x27d)]('Mount\x20target\x20created\x20for\x20subnet:\x20'+_0x3f5667+_0x834d21(0x2ad)+_0x50f3d3+'.');break;}else _0x1a4cdb[_0x834d21(0x283)]=_0x4fd8b7[this[_0x834d21(0x286)]][_0x834d21(0x2fe)],_0x44208c[_0x834d21(0x2a3)]=_0x14210c[this[_0x834d21(0x286)]][_0x834d21(0x2b0)];}if(_0xeef2f2[_0x834d21(0x24c)](_0x383173,_0xeef2f2['Wznfb'])){if(_0xeef2f2[_0x834d21(0x2d0)](_0xeef2f2['seyJi'],_0xeef2f2[_0x834d21(0x24b)]))_0x5aeeea[_0x834d21(0x244)](_0x333800[_0x834d21(0x2ca)]);else throw new Error(_0x834d21(0x328)+_0x50f3d3+_0x834d21(0x300));}await new Promise(_0x4f2752=>setTimeout(_0x4f2752,0x1388));}}}async[a0_0x1dba5e(0x2e6)](_0xdeaf83,_0x3b72e9){const _0x9e614a=a0_0x1dba5e,_0xd0e1df={};_0xd0e1df[_0x9e614a(0x331)]=[_0x3b72e9];const _0x3de196=await _0xdeaf83[_0x9e614a(0x269)](_0xd0e1df)[_0x9e614a(0x30b)]();return _0x3de196[_0x9e614a(0x28f)][0x0][_0x9e614a(0x284)];}[a0_0x1dba5e(0x21c)](_0x40f44c){const _0x537b01=a0_0x1dba5e,_0x315028={'WmQxy':function(_0x5ceab3,_0x39be0f){return _0x5ceab3!==_0x39be0f;},'WaGhB':_0x537b01(0x2d7),'dhKkV':'qKTAk','ttImQ':function(_0x22ee9a,_0xfb03b7){return _0x22ee9a(_0xfb03b7);},'VRCgZ':function(_0x5330ad,_0x8eb39){return _0x5330ad===_0x8eb39;},'RVvor':_0x537b01(0x28e),'pwIwf':function(_0x1555d9,_0x54620b){return _0x1555d9(_0x54620b);},'yFGae':_0x537b01(0x240),'TZOIo':_0x537b01(0x23f)},_0x207dd4={};_0x207dd4[_0x537b01(0x303)]=[_0x40f44c];const _0x584d77=_0x207dd4;return new Promise((_0x361a26,_0x3ae944)=>{const _0x511649=_0x537b01;if(_0x315028['VRCgZ'](_0x315028['yFGae'],_0x315028[_0x511649(0x31c)])){const _0x1c1372={};_0x1c1372[_0x511649(0x2cb)]=_0x315028[_0x511649(0x237)],_0x1c1372[_0x511649(0x314)]=global_registry[_0x511649(0x317)];const _0x1f953b=new awsSDK['EC2'](_0x1c1372);_0x1f953b['describeVpcs'](_0x584d77)['promise']()['then'](_0x24ac84=>{const _0x165dd4=_0x511649;_0x315028[_0x165dd4(0x1f7)](_0x315028['WaGhB'],_0x315028[_0x165dd4(0x226)])?_0x315028[_0x165dd4(0x2e3)](_0x361a26,!![]):_0x9fd302[_0x165dd4(0x289)](_0x165dd4(0x322)+_0x242743[_0x165dd4(0x315)]+':',_0x27e79a);})[_0x511649(0x277)](_0x4bde77=>{const _0x308965=_0x511649;if(_0x315028[_0x308965(0x2e5)](_0x315028['RVvor'],_0x315028[_0x308965(0x1f0)]))logger['error'](_0x308965(0x1fb)+_0x40f44c+'\x20in\x20region\x20'+global_registry[_0x308965(0x317)]+_0x308965(0x21f)),_0x315028['pwIwf'](_0x361a26,![]);else return this['checkClusterCreated']();});}else return _0x5e103a[_0x511649(0x31e)][_0x511649(0x2b2)]['ingress'][0x0][_0x511649(0x213)];});}[a0_0x1dba5e(0x33a)](_0x4b9a44,_0x12c5f6){const _0x371c86=a0_0x1dba5e,_0x28cbf4={'DmONd':function(_0x1ec27a,_0x57fabd){return _0x1ec27a(_0x57fabd);},'Irsyg':'2016-11-15','XIBew':_0x371c86(0x1e4)},_0x2a956c={};_0x2a956c['Name']=_0x28cbf4[_0x371c86(0x2d5)],_0x2a956c[_0x371c86(0x23e)]=[_0x12c5f6];const _0x2dd5dd={};_0x2dd5dd[_0x371c86(0x290)]=[_0x2a956c];const _0x16a111=_0x2dd5dd;return new Promise((_0x4faef2,_0x5260d4)=>{const _0x2414b2=_0x371c86,_0x3ddb89={'lRKGD':function(_0x5ceaa1,_0x119a88){const _0x9e0267=a0_0x46eb;return _0x28cbf4[_0x9e0267(0x216)](_0x5ceaa1,_0x119a88);}},_0x2fc729={};_0x2fc729['apiVersion']=_0x28cbf4[_0x2414b2(0x313)],_0x2fc729[_0x2414b2(0x314)]=global_registry[_0x2414b2(0x317)];const _0x2da5dc=new awsSDK['EC2'](_0x2fc729);_0x2da5dc[_0x2414b2(0x269)](_0x16a111)['promise']()[_0x2414b2(0x1ea)](_0x14a4b7=>{const _0x14f621=_0x2414b2,_0x2d2539=[],_0x4c6ee3=[];_0x14a4b7[_0x14f621(0x28f)][_0x14f621(0x25e)](_0x230f21=>{const _0x3f6376=_0x14f621;_0x2d2539[_0x3f6376(0x244)](_0x230f21[_0x3f6376(0x2ca)]);});const _0x5a1ff4=_0x4b9a44[_0x14f621(0x1e6)](_0x4c3562=>{const _0x58af7b=_0x14f621;if(_0x2d2539[_0x58af7b(0x2a1)](_0x4c3562['value']))return!![];return _0x4c6ee3['push'](_0x4c3562),![];});_0x28cbf4[_0x14f621(0x216)](_0x4faef2,[_0x5a1ff4,_0x4c6ee3]);})[_0x2414b2(0x277)](_0xdb8133=>{const _0x5bf717=_0x2414b2;logger['error'](_0x5bf717(0x2cc)+_0x4b9a44+'\x20in\x20region\x20'+global_registry[_0x5bf717(0x317)]+_0x5bf717(0x2c4)+_0xdb8133),_0x3ddb89[_0x5bf717(0x1d9)](_0x4faef2,[![],[]]);});});}}const a0_0x265bb0={};a0_0x265bb0['AWSCloudProvider']=AWSCloudProvider,module[a0_0x1dba5e(0x253)]=a0_0x265bb0;function a0_0x2369(){const _0x1b15f3=['.\x20Please\x20Check\x20and\x20try\x20again','LQDKJ','describeVpcs','fUKoo','config','lLiHN','ElBTR','dhKkV','message','EiiCq','MountTargetId','getClusterInfo','fGdCv','FaCzm','aws-sdk','1|3|2|0|4','SGvan','utf-8','warning','createStorageClass','abcVC','\x20because\x20its\x20Availability\x20Zone\x20','join','6272604iHPkaw','TZOIo','SaLKv','rWizj','ilAel','Creating\x20EFS\x20CSI\x20Driver\x20&\x20Storage\x20Class','UKSjW','YqsjL','Values','2016-11-15','WqHPa','1971542gZdAFx','bLodW','1|0|4|3|2','push','XvdDv','exit','xXuna',',\x20ClusterRole\x20=>\x20','RcClP','WWFsO','plJgJ','RZGLj','zUdbN','GejXY','wtzty','yEWeV','IXJHj','Authmap\x20already\x20exists.\x20Not\x20updating','exports','hNbdv','ycuUP','replace','oUpXp','EFSControllerRoleArn','getNodeGroupInfo','XgXhF','egTZu','writeFileSync','js-yaml','forEach','cluster','update','zgznq','.\x20Deleting\x20all\x20the\x20stacks','ogsei','Creating\x20required\x20resources\x20-\x20EKS\x20role(s),\x20VPC,\x20Subnets,\x20Security\x20Groups,\x20Cluster\x20and\x20Node\x20Group(s)','Following\x20resources\x20are\x20created:','XeTfW','rNkHx','KRaPB','describeSubnets',',\x20Subnets\x20=>\x20','HpKwm','13476950ExlYdg','Sdbkh','vjOMw','zPMoQ','getGridHostname','YzGck','listClusters','PwAvq','createAuthConfigMap','yqUGH','28224vbltsJ','catch','toUpperCase','createNamespacedConfigMap','Gzmvn','sendResourceDataToHST','EMkOg','info','body','cNpzI','dRijT','add','LOG','cloudProviderAccessKey','AvailabilityZone','loadAll','cloudProviderName','mEVsV','EFSSecurityGroup','error','./CloudProvider','<ARN>','OKLmU','haVLP','gPyYb','Subnets','Filters','EC2','yyUoe','ZUcie','VfPfz','GfcxO','readFileAsync','cloudProvider','MountTargets','rvrNT','-NodeGroup','EKS','oezwD','hHKxR','ygJec','../config/constants','secretAccessKey','includes','ASMso','cloudProviderSecretKey','../utils/createAutoscalerStack','create-grid-called','templates','vtmYU','TUEmK','Outputs',',\x20EFS_FileSystem\x20=>\x20','AorOA','KyETW',',\x20MountTargetId:\x20','Skipping\x20Autoscaler\x20due\x20to:\x20','DmfEO','secret','reportToGalactusAndSendToEDS','loadBalancer','nxwcs','XrBgQ','NodeRole\x20=>\x20','reduce','fileSystemId','Subnets\x20=>\x20','uvodH','jYYnr','Added\x20storage\x20class.','tags','FhYCz','oDisP',',\x20EFS_SecurityGroup\x20=>\x20','setCachedCredsInRegistry','available','RUMqY','UqeVM','.\x20Error:\x20','QDRtJ','mCRfa','LCKNl','isClusterPresent','webSocketUtils','SubnetId','apiVersion','Cannot\x20find\x20subnets\x20','path','toLowerCase','browserstack:managedBy','VlNUc','Zogqr','3110ZjCzMI','match','OutputValue','XIBew','type','ASyVs','Error\x20occurred\x20while\x20setting\x20up\x20Hub\x20HA\x20infra:\x20','XaQnL','2017-11-01','minNodes','all','isUbW','KdKtE','getUserInput','createMountTargets','oIQxB','OhWjQ','ttImQ','vlITy','VRCgZ','getAvailabilityZone','bbWoZ','has','BiBxX','describeNodegroup','hub-ha-aws-setup-failed','vKAWZ',',VPC\x20=>\x20','Wiolx','JKMig','browserstack','ndKgT','Adding\x20EFS\x20CSI\x20Driver','../utils/utilityMethods','DuCJg','bGwpf','maxNodes','zAPEh','Kifmy','LarNl','KxwdA','Creating\x20required\x20dependencies\x20for\x20Hub\x20HA\x20-\x20IAM\x20Role\x20for\x20EFS\x20CSI\x20Controller,\x20Security\x20Group,\x20EFS','Skipping\x20subnet\x20','accessKeyId','accessKey','SIsQL','\x20failed\x20to\x20reach\x20the\x20available\x20state.','NIUWm','cgGXj','VpcIds','Following\x20resources\x20are\x20created\x20for\x20Hub\x20HA:\x20EFS_ControllerRoleArn\x20=>\x20','autoscaler-creation-failed','Creating\x20required\x20dependencies\x20-\x20EKS\x20Role(s),\x20VPC,\x20Subnets,\x20Security\x20Groups\x20and\x20Cluster\x20and\x20Node\x20Group(s)','WARNING','KBspZ','../utils/createHubHaStack','QKztF','promise','aws-auth-cm.yaml','hubharesources','Stacks','ERROR','xaMPN','ixdUP','\x20has\x20already\x20been\x20used.','Irsyg','region','value','VuuMK','clusterRegion','jRjvR','Autoscaler\x20Role\x20created.ARN:\x20','MfeWC','waitForMountTarget','yFGae','HOuVJ','status','xwehA','SMbVi','3rfVXQv','Error\x20creating\x20mount\x20target\x20for\x20subnet\x20','AWZmE','endpoint','CYVKK','FdHzQ','sendEventToBackend','Mount\x20target\x20','EFS','sIFBx',',\x20SecurityGroups\x20=>\x20','urxJQ','NeBdn','7988jRgSbz','Setting\x20up\x20Hub\x20HA','../utils/createClusterStack','SubnetIds','EFSFileSystemId','jdaSh','qdzqV','YNkTf','OutputKey','mGonv','GZeYR','aws_credentials','isSubnetsValid','SecurityGroups','zeHdn','label','data','describeMountTargets','storage-class.yaml','GGYVj','KPosB','Cluster\x20=>\x20','XHxhB','rWBtw','\x0aaws_secret_access_key\x20=\x20','failed','Mounting\x20Target\x20for\x20EFS','ClusterRole\x20=>\x20','lRKGD','LbimK','efs-csi-driver-aws.yaml','warn','DSONy',',\x20NodeRole\x20=>\x20','namespace','xbWOg','isBrowserstackCluster','ingress','AFRAd','vpc-id','Creating\x20Autoscaler\x20Role','every','UwDgs','LMDxJ','\x20ACCESS\x20KEY:\x20','then','rLKgU','YyKiX','rws','thHGk','clusterName','RVvor','771511mfEKDN','createMountTargetAndWait','setupAutoscaler','PHjbn','LiVZz','Added\x20EFS\x20CSI\x20Driver','WmQxy','zgEDF','243gyvzYk','SqIsu','Cannot\x20find\x20VPC\x20','NaLqy','asjHn','clusters','toString','BHJuh','mWkAQ','nkZyZ','EFS\x20SecurityGroup\x20=>\x20','LifeCycleState','EpUyh','sztEd','RnGQu','HceNv','9031351zXzuvp','setupHubHa','split','certificateAuthority','hHZAa','deleteCluster','NJVQy','bmFDd','nodegroupName','jocjq','hostname','vdLDY','yyFZP','DmONd','init','\x20in\x20region\x20','WJEjF','load','name','isVPCPresent','MVmOA','BwCNy'];a0_0x2369=function(){return _0x1b15f3;};return a0_0x2369();}